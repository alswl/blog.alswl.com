<!DOCTYPE html>
<html lang="en"
>
<head>
    <title>服务器 Push 技术 - Log4D</title>
    <!-- Using the latest rendering mode for IE -->
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Security-Policy" content="block-all-mixed-content">
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon" />



<link rel="canonical" href="http://127.0.0.1:8000/2012/05/comet/">

        <meta name="author" content="alswl" />
        <meta name="keywords" content="综合技术,Comet,RabbitMQ,Socket.IO,Node.JS,AMPQ" />
        <meta name="description" content="服务器 Push 技术表示服务器可以主动推送消息给客户端浏览器。 实现方式 Comet Ajax 轮询 iframe / htmlfile script tag （不中断的连续请求） Flash 通讯 WebSocket Comet 本意是彗星，彗星尾巴痕迹很像长连接工作方式，所以 Comet 指代长连接。 在 Ajax 轮询的分类上，存在一些分歧，这里我把轮询认为一种 Comet 方式。 ps：「长连接」在一些场景下，是另外一种意义「HTTP: Keep alive」。不在本文讨论的范围中。 参考链接： Comet：基于 HTTP 长连接的「服务器推」技术 Socket.IO Supported transports" />



    <!-- Bootstrap -->
        <link rel="stylesheet" href="https://cdn.staticfile.org/twitter-bootstrap/3.1.0/css/bootstrap.min.css" type="text/css"/>
    <link href="https://cdn.staticfile.org/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet">

    <link href="http://127.0.0.1:8000/theme/css/pygments/native.css" rel="stylesheet">
    <link rel="stylesheet" href="http://127.0.0.1:8000/theme/css/style.css" type="text/css"/>

    <link href="http://127.0.0.1:8000/atom.xml" type="application/atom+xml" rel="alternate" title="Log4D Atom Feed" />
    <link href="http://127.0.0.1:8000/rss.xml" type="application/rss+xml" rel="alternate" title="Log4D RSS Feed" />

</head>
<body>

<div class="navbar navbar-default" role="navigation">
    <div class="container  col-lg-8 col-lg-offset-2">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-ex1-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a href="http://127.0.0.1:8000/" class="navbar-brand">
Log4D            </a>
        </div>
        <div class="collapse navbar-collapse navbar-ex1-collapse">
            <ul class="nav navbar-nav">
                    <li><a href="/tags/">Tags</a></li>
                    <li><a href="/links/">Links</a></li>
                    <li><a href="/about/">About</a></li>
            </ul>
            <ul class="nav navbar-nav navbar-right">
                <li><a href="http://127.0.0.1:8000/archives/"><i class="fa fa-th-list"></i><span class="icon-label">Archives</span></a></li>
            </ul>
        </div>
        <!-- /.navbar-collapse -->
    </div>
</div> <!-- /.navbar -->

<div class="container">
    <div class="row">
        <div class="col-lg-8 col-lg-offset-2">

    <section id="content">
        <article class="article-detail">
            <header class="page-header">
                <h1 class="title">
                    <a href="http://127.0.0.1:8000/2012/05/comet/"
                       rel="bookmark"
                       title="Permalink to 服务器 Push 技术">
                        服务器 Push 技术
                    </a>
                </h1>
                <nav class="toc col-lg-2">
                  <div id="toc"><ul><li><a class="toc-href" href="#实现方式" title="实现方式">实现方式</a><ul><li><a class="toc-href" href="#浏览器支持情况" title="浏览器支持情况">浏览器支持情况</a></li></ul></li><li><a class="toc-href" href="#各大网站连接情况_1" title="各大网站连接情况">各大网站连接情况</a><ul><li><a class="toc-href" href="#新浪微博" title="新浪微博">新浪微博</a></li><li><a class="toc-href" href="#知乎" title="知乎">知乎</a></li></ul></li><li><a class="toc-href" href="#框架支持_1" title="框架支持">框架支持</a><ul><li><a class="toc-href" href="#orbited2" title="orbited2">orbited2</a></li><li><a class="toc-href" href="#streamhub" title="StreamHub">StreamHub</a></li><li><a class="toc-href" href="#socket.io" title="socket.io">socket.io</a></li><li><a class="toc-href" href="#sockjs-client" title="sockjs-client">sockjs-client</a></li></ul></li><li><a class="toc-href" href="#实战-socket.io_1" title="实战 Socket.io">实战 Socket.io</a><ul><li><a class="toc-href" href="#尴尬的-pylons" title="尴尬的 Pylons">尴尬的 Pylons</a></li><li><a class="toc-href" href="#简单demo" title="简单Demo">简单Demo</a></li><li><a class="toc-href" href="#跨平台" title="跨平台">跨平台</a></li><li><a class="toc-href" href="#安全性" title="安全性">安全性</a></li></ul></li><li><a class="toc-href" href="#node-ampq-驱动_1" title="Node AMPQ 驱动">Node AMPQ 驱动</a><ul><li><a class="toc-href" href="#demo" title="Demo">Demo</a></li></ul></li><li><a class="toc-href" href="#socket.io-rabbitmq_1" title="Socket.IO + RabbitMQ">Socket.IO + RabbitMQ</a></li></ul></div>
                </nav>
            </header>
            <div class="entry-content">
                <div class="panel">
                    <div class="panel-body">
<footer class="post-info">
    <span class="label label-default">Date</span>
    <span class="published">
        <i class="fa fa-calendar"></i><time datetime="2012-05-30T10:40:00+08:00"> 2012-05-30</time>
    </span>



<span class="label label-default">Tags</span>
	<a href="http://127.0.0.1:8000/tag/zong-he-ji-zhu/">综合技术</a>
        /
	<a href="http://127.0.0.1:8000/tag/comet/">Comet</a>
        /
	<a href="http://127.0.0.1:8000/tag/rabbitmq/">RabbitMQ</a>
        /
	<a href="http://127.0.0.1:8000/tag/socketio/">Socket.IO</a>
        /
	<a href="http://127.0.0.1:8000/tag/nodejs/">Node.JS</a>
        /
	<a href="http://127.0.0.1:8000/tag/ampq/">AMPQ</a>
    
</footer><!-- /.post-info -->                    </div>
                </div>
                <p>服务器 Push 技术表示服务器可以主动推送消息给客户端浏览器。</p>
<h2 id="实现方式">实现方式</h2>
<ul>
<li>Comet
<ul>
<li>Ajax 轮询</li>
<li>iframe / htmlfile</li>
<li>script tag （不中断的连续请求）</li>
<li>Flash 通讯</li>
</ul></li>
<li>WebSocket</li>
</ul>
<p>Comet 本意是彗星，彗星尾巴痕迹很像长连接工作方式，所以 Comet 指代长连接。 在 Ajax 轮询的分类上，存在一些分歧，这里我把轮询认为一种 Comet 方式。</p>
<p>ps：「长连接」在一些场景下，是另外一种意义「HTTP: Keep alive」。不在本文讨论的范围中。</p>
<p>参考链接：</p>
<ul>
<li><a href="http://www.ibm.com/developerworks/cn/web/wa-lo-comet/">Comet：基于 HTTP 长连接的「服务器推」技术</a></li>
<li><a href="http://socket.io/#browser-support">Socket.IO Supported transports</a></li>
</ul>
<!-- more -->
<h3 id="浏览器支持情况">浏览器支持情况</h3>
<p>WebSocket 属于 HTML5 规范，需要「先进」浏览器支持， Flash 通讯需要浏览器安装 Flash 插件，其他方式都可以适应常见浏览器。</p>
<p>参考连接：</p>
<ul>
<li><a href="http://zh.wikipedia.org/wiki/HTTP持久链接">HTTP持久链接</a></li>
<li>[Comet (programming)](http://en.wikipedia.org/wiki/Comet_(programming))</li>
<li><a href="http://www.cnblogs.com/tianzhiliang/archive/2011/06/13/2079564.html">一个误解: 单个服务器程序可承受最大连接数「理论」上是「65535」</a></li>
<li><a href="http://www.zeitoun.net/articles/comet_and_php/start">How to implement COMET with PHP</a></li>
</ul>
<h2 id="各大网站连接情况_1">各大网站连接情况</h2>
<p>可以通过 url 请求来揣测一些东西，比如说，它们没有用 WebSocket， 否则 FireBug 是无法监测的，WebSocket 可以双向通讯。</p>
<h3 id="新浪微博">新浪微博</h3>
<p>未读信息链接： <code>http://rm.api.weibo.com/remind/unread_count.json?target=api&amp;_pid=10001&amp;count=2&amp;source=3818214747&amp;callback=STK_133834300664875</code></p>
<p>未读信息大约每20秒触发一次，像是 Ajax 轮询。</p>
<p>IM 长连接： <code>http://4.46.web1.im.weibo.com/im?jsonp=parent.org.cometd.script._callback5&amp;message=%5B%7B%22channel%22%3A%22%2Fmeta%2Fconnect%22%2C%22connectionType%22%3A%22callback-polling%22%2C%22id%22%3A6%2C%22clientId%22%3A%22b02qp9qw9cgiuxxyn3%22%7D%5D&amp;1338343019008</code></p>
<p>可以看出新浪在使用 JSONP 跨域做 IM 长连接，FireBug 中也始终有链接请求， 看上去像 Script Tag 请求方式。</p>
<h3 id="知乎">知乎</h3>
<p>请求链接： <code>http://comet.zhihu.com/update?loc=http%3A%2F%2Fwww.zhihu.com%2F&amp;channel=13781e6817833300f0a70f19&amp;callback=zhp13781e6a6f22349b9865b47c8</code></p>
<p>依然能在 FireBug 中看到请求地址，说明客户端请求数据还是走 HTTP 方式， 并且会出现 update 动作链接一直出于请求状态，猜测知乎仍然使用 Script Tag 请求。</p>
<h2 id="框架支持_1">框架支持</h2>
<h3 id="orbited2">orbited2</h3>
<p><a href="http://labs.gameclosure.com/orbited2/">http://labs.gameclosure.com/orbited2/</a></p>
<ul>
<li>跨浏览器</li>
<li>容易集成：IRC / XMPP / ActiveMQ / RabbitMQ</li>
<li>Python</li>
</ul>
<h3 id="streamhub">StreamHub</h3>
<p><a href="http://www.stream-hub.com/">http://www.stream-hub.com/</a></p>
<ul>
<li>免费版仅支持 10 个在线</li>
<li>支持 Java / .net / iPhone</li>
</ul>
<h3 id="socket.io">socket.io</h3>
<p><a href="http://socket.io/">http://socket.io/</a></p>
<ul>
<li>NodeJS</li>
<li>推送方式：
<ul>
<li>WebSocket</li>
<li>Adobe&reg; Flash&reg; Socket</li>
<li>AJAX long polling</li>
<li>AJAX multipart streaming</li>
<li>Forever Iframe</li>
<li>JSONP Polling</li>
</ul></li>
<li>支持浏览器：
<ul>
<li>Internet Explorer 5.5+</li>
<li>Safari 3+</li>
<li>Google Chrome 4+</li>
<li>Firefox 3+</li>
<li>Opera 10.61+</li>
<li>iPhone Safari</li>
<li>iPad Safari</li>
<li>Android WebKit</li>
<li>WebOs WebKit</li>
</ul></li>
</ul>
<h3 id="sockjs-client">sockjs-client</h3>
<p><a href="https://github.com/sockjs/sockjs-client">https://github.com/sockjs/sockjs-client</a></p>
<ul>
<li>支持 Node.js / Erlang / Lua / Python-Tornado</li>
<li>跨浏览器</li>
</ul>
<h2 id="实战-socket.io_1">实战 Socket.io</h2>
<p>考虑到上述候选框架的使用场景，这里选择 Socket.IO 作为 Comet 框架。</p>
<h3 id="尴尬的-pylons">尴尬的 Pylons</h3>
<p>Pylons 和 Comet 配合有问题，问题处在标准 WSGI 是非异步的。 （看邮件列表里面，似乎新的标准准备支持）。</p>
<ul>
<li><a href="http://stackoverflow.com/a/3090118">http://stackoverflow.com/a/3090118</a></li>
<li><a href="http://mail.python.org/pipermail/web-sig/2008-July/003545.html">http://mail.python.org/pipermail/web-sig/2008-July/003545.html</a></li>
<li><a href="http://pypi.python.org/pypi/Spawning/">Spawning</a></li>
</ul>
<p>这样的话，我就直接选择使用 Node.JS 做 Comet 服务器，Nginx 负责转发。</p>
<h3 id="简单demo">简单Demo</h3>
<p>node.js 代码</p>
<p>```js app.js /* global __dirname, console */</p>
<p>var app = require(&lsquo;http&rsquo;).createServer(handler), io = require(&lsquo;socket.io&rsquo;).listen(app), fs = require(&lsquo;fs&rsquo;);</p>
<p>app.listen(8080);</p>
<p>function handler(req, res) { fs.readFile(__dirname + &lsquo;/index.html&rsquo;, function (err, data) { if (err) { res.writeHead(500); return res.end(&lsquo;Error loading index.html&rsquo;); }</p>
<pre><code>        res.writeHead(200);
        res.end(data);
    });</code></pre>
<p>}</p>
<p>io.sockets.on(&lsquo;connection&rsquo;, function (socket) { &lsquo;use strict&rsquo;; socket.emit(&lsquo;news&rsquo;, {hello: &lsquo;world, for everyone!&rsquo;}); socket.on(&lsquo;my other event&rsquo;, function (data) { console.log(data); }); socket.on(&lsquo;private message&rsquo;, function (from, msg) { console.log(&lsquo;I received a private message by&rsquo;, from, &rsquo; saying &rsquo;, msg); }); }); ```</p>
<p>页面代码</p>
``` html index.html
<html>
<head>
<meta content="text/html; charset=utf-8" http-equiv="content-type"/>
<pre><code>&lt;title&gt;Socket.io Demo&lt;/title&gt;
&lt;script src="/socket.io/socket.io.js"&gt;&lt;/script&gt;
&lt;script&gt;
    var socket = io.connect('/');

    socket.on('news', function (data) {
        console.log(data);
        socket.emit('my other event', { my: 'data' });
    });
&lt;/script&gt;</code></pre>
</head>
<body>
</body>
</html>
<p>```</p>
<p>连接成功之后，在浏览器控制台里面，可以使用 <code>socket.emit('my other event', {biu: 'biu'});</code> 向服务器发送消息。</p>
<p>服务器也可以通过 <code>socket.emit()</code> 来向客户端推送消息。</p>
<p>私有信息发送，使用 <code>socket.emit('private message', 'James', {some: 'message'});</code> 。</p>
<h3 id="跨平台">跨平台</h3>
<p>实测看来，在 IE8 下面， Socket.io 会降级使用 <code>htmlfile</code> 来实现 Comet。</p>
<p>而 Firefox 中会有 <code>websocket / htmlfile / xhr-polling / jsonp-polling</code> 依次备选， 首选 websocket。</p>
<h3 id="安全性">安全性</h3>
<p>问题：提交数据的身份认证过程，以前在后台由 Web 框架自动完成，而现在流程是 Socket.IO -&gt; RabbitMQ -&gt; Web App，身份验证的复杂度增加了。</p>
<p>思路：Socket.IO 使用 Nginx 代理转发，从而保留同一域名下面的 cookie 信息， 这样能够提交到 Socket.IO 服务器，每次 RabbitMQ Message 都记录 cookie 信息， 后台从 RabbitMQ 读取信息时候，再进行认证。</p>
<p>实际操作：由于 Comet 中的数据流仅负责推送，客户端继续使用原始 POST 方式发送数据到服务器，所以暂时不会产生身份认证问题。</p>
<h2 id="node-ampq-驱动_1">Node AMPQ 驱动</h2>
<p>Socket.IO 提供了一个通用的 Comet 解决方案，下面就需要点润滑剂，将整个数据流跑通。 消息队列 RabbitMQ 正好适合用来做这个。</p>
<p>Rabbit 官网提到了一个套件 <a href="https://github.com/squaremo/rabbit.js">rabbit.js</a> 。 遗憾的是这个库是混合了 RabbitMQ 和 Node.JS，提供了一个封装好的 Node.JS 库， 而我想要的仅仅是一个 AMPQ 协议驱动。<a href="https://github.com/postwait/node-amqp/blob/master/amqp.js">node-amqp</a> 则是我们需要的驱动。</p>
<h3 id="demo">Demo</h3>
<p>服务器接收者脚本：</p>
<p>``` js app-amqp.js /* global __dirname, console */</p>
<p>var conn = require(&lsquo;amqp&rsquo;).createConnection({ url: &lsquo;amqp://localhost&rsquo;});</p>
<p>console.log(&lsquo;socket works&rsquo;); conn.on(&lsquo;ready&rsquo;, function() { console.log(&lsquo;conn ready&rsquo;); conn.queue(&lsquo;socket.io&rsquo;, {passive: true}, function(queue){ queue.subscribe(function (json, headers, deliveryInfo) { console.log(&lsquo;#json:&rsquo;) view(json); console.log(&lsquo;#headers:&rsquo;) view(headers); console.log(&lsquo;#deliveryInfo:&rsquo;) view(deliveryInfo); }); }); });</p>
<p>conn.on(&lsquo;error&rsquo;, function() { console.error(&lsquo;error&rsquo;); });</p>
<p>function view(obj) { for (var i in obj) { if(obj.hasOwnProperty(i)) { console.log(i + &lsquo;:&rsquo; + obj[i]); } } } ```</p>
<p>用 Python 写的发送者脚本：</p>
<p>``` python producter.py # coding=utf-8 #! /usr/bin/env python2</p>
<p>import pika import json import logging import time</p>
<p>logger = logging.getLogger()</p>
<p>def main(): conn = pika.BlockingConnection( pika.ConnectionParameters(&lsquo;localhost&rsquo;)) chan = conn.channel() chan.queue_declare(queue=&lsquo;socket.io&rsquo;)</p>
<pre><code>count = 10
while (count &gt; 0):
    message = {'no': count, 'some': 'Message', u'比如': u'中文信息'}
    publish_text(chan, 'socket.io', u'text %d' %count)
    publish_json(chan, 'socket.io', message)
    logger.info('add one message to RabbitMQ')
    #time.sleep(5) # sleep 5 sec
    count -= 1</code></pre>
<p>def publish_text(channel, queue, message): channel.basic_publish(exchange=&rsquo;&lsquo;, routing_key=queue, body=json.dumps(message), properties=pika.BasicProperties( content_type=&rsquo;text/plain&rsquo;, content_encoding=&lsquo;utf-8&rsquo;, delivery_mode=1) )</p>
<p>def publish_json(channel, queue, message): channel.basic_publish(exchange=&rsquo;&lsquo;, routing_key=queue, body=json.dumps(message), properties=pika.BasicProperties( content_type=&rsquo;application/json&rsquo;, content_encoding=&lsquo;utf-8&rsquo;, delivery_mode=1) )</p>
<p>if <strong>name</strong> == &lsquo;<strong>main</strong>&rsquo;: main() ```</p>
<p>使用 <code>node ./app-amqp.js</code> 运行 Node.JS 服务器，然后运行 <code>producter.py</code> 产生 RabbitMQ Message，我使用的数据格式是序列化的 JSON 字串， 还有 <code>JSON, Thrift, Protocol Buffers, MessagePack</code> 这些格式可供选择。运行结果如下：</p>
<pre class="text"><code>#json:
data: "text 1"
UnicodeEncodeError: 'ascii' codec can't encode characters in position 0-3: ordinal not icontentType: text/plain
#headers:
#deliveryInfo:
contentType: text/plain
contentEncoding: utf-8
deliveryMode: 1
queue: socket.io
deliveryTag: 19
redelivered: false
exchange:
routingKey: socket.io
consumerTag: node-amqp-10880-0.06487216474488378
#json:
比如: 中文信息
some: Message
no: 1
#headers:
#deliveryInfo:
contentType: application/json
contentEncoding: utf-8
deliveryMode: 1
queue: socket.io
deliveryTag: 20
redelivered: false
exchange:
routingKey: socket.io
consumerTag: node-amqp-10880-0.06487216474488378</code></pre>
<p>里面有两个 Message，发送数据格式为 <code>text/plain</code> 和 <code>application/json</code> 。</p>
<p>参考链接：</p>
<ul>
<li><a href="http://pika.github.com/">Pika Document</a></li>
</ul>
<h2 id="socket.io-rabbitmq_1">Socket.IO + RabbitMQ</h2>
<p>最后提供 Socket.IO + RabbitMQ 的完整 Demo，客户端会实时接受到来自消息发送者的消息。</p>
<p>``` js app-amqp.socket.js /* global __dirname, console */</p>
<p>var app = require(&lsquo;http&rsquo;).createServer(handler), io = require(&lsquo;socket.io&rsquo;).listen(app), fs = require(&lsquo;fs&rsquo;);</p>
<p>app.listen(8080);</p>
<p>function handler(req, res) { fs.readFile(__dirname + &lsquo;/index.html&rsquo;, function (err, data) { if (err) { res.writeHead(500); return res.end(&lsquo;Error loading index.html&rsquo;); }</p>
<pre><code>        res.writeHead(200);
        res.end(data);
    });</code></pre>
<p>}</p>
<p>io.sockets.on(&lsquo;connection&rsquo;, function (socket) { console.log(&lsquo;io ready&rsquo;);</p>
<pre><code>var conn = require('amqp').createConnection({ url: 'amqp://localhost'});
conn.on('ready', function () {
    console.log('conn ready');
    conn.queue('socket.io', {passive: true}, function(queue){
        queue.subscribe(function (json, headers, deliveryInfo) {
            console.log(json);
            console.log(deliveryInfo.contentType);
            if (deliveryInfo.contentType == 'application/json') {
                socket.emit('news', json);
            }
            if (deliveryInfo.contentType == 'text/plain') {
                socket.emit('news', json.data.toString());
            }
        });
    });
});</code></pre>
<p>});</p>
<p>```</p>
<p>在运行 <code>producter.py</code> 后，Python 脚本持续产生 Message 到 RabbitMQ， <code>app-amqp-socket.js</code> 订阅读取 Message 并推送到浏览器端。 浏览器可以在 Console 里面看到日志：</p>
<pre class="text"><code>Object { 比如="中文信息", some="Message", no=1}</code></pre>
<p>至此，我们可以完成 WebApp -&gt; RabbitMQ -&gt; Socket.IO -&gt; Browser 的实时推送。</p>

            </div>
            <!-- /.entry-content -->
              
<hr>
<div class="panel">
<div class="panel-body">
   <small>原文链接: <a href="https://blog.alswl.com/2012/05/comet/">https://blog.alswl.com/2012/05/comet/</a></small><br>
   <small>3a1ff193cee606bd1e2ea554a16353ee</small><br>
   <small>欢迎关注我的微信公众号：<a href="http://mp.weixin.qq.com/mp/getmasssendmsg?__biz=MzIyNTIwMTU3MQ==#wechat_webview_type=1&wechat_redirect">窥豹</a></small><br>
   <small><img src="https://4ocf5n.dijingchao.com/upload_dropbox/201605/qrcode_for_gh_17e2f9c2caa4_258.jpg"/></small>
   <small><img src="https://4ocf5n.dijingchao.com/upload_dropbox/meta/wechat-pay-s-crop.png"/></small>
</div>
</div>

        </article>
    </section>

        </div>
        <div class="col-lg-3 col-lg-offset-2" id="sidebar">

<aside>
    <section>
        <ul class="list-group list-group-flush">
                <li class="list-group-item"><h4><i class="fa fa-home fa-lg"></i><span class="icon-label">Social</span></h4>
                  <ul class="list-group" id="social">
                    <li class="list-group-item"><a href="https://blog.alswl.com/atom.xml"><i class="fa fa-rss-square fa-lg"></i> RSS</a></li>
                    <li class="list-group-item"><a href="https://twitter.com/alswl"><i class="fa fa-twitter-square fa-lg"></i> Twitter</a></li>
                    <li class="list-group-item"><a href="https://github.com/alswl"><i class="fa fa-github-square fa-lg"></i> Github</a></li>
                    <li class="list-group-item"><a href="http://weibo.com/alswlx"><i class="fa fa-weibo fa-lg"></i> Weibo</a></li>
                  </ul>
                </li>




        </ul>
    </section>

</aside>        </div>
    <div class="col-lg-3" id="sidebar">
<aside>
    <section>
        <ul class="list-group list-group-flush">
                <li class="list-group-item"><a href="http://127.0.0.1:8000/"><h4><i class="fa fa-home fa-lg"></i><span class="icon-label">Categories</span></h4></a>
                    <ul class="list-group" id="categories">
                        <li class="list-group-item">
                            <a href="http://127.0.0.1:8000/category/coding/">
                                <i class="fa fa-folder-open fa-lg"></i> Coding
                            </a>
                        </li>
                        <li class="list-group-item">
                            <a href="http://127.0.0.1:8000/category/efficiency/">
                                <i class="fa fa-folder-open fa-lg"></i> Efficiency
                            </a>
                        </li>
                        <li class="list-group-item">
                            <a href="http://127.0.0.1:8000/category/fun/">
                                <i class="fa fa-folder-open fa-lg"></i> Fun
                            </a>
                        </li>
                        <li class="list-group-item">
                            <a href="http://127.0.0.1:8000/category/internet/">
                                <i class="fa fa-folder-open fa-lg"></i> Internet
                            </a>
                        </li>
                        <li class="list-group-item">
                            <a href="http://127.0.0.1:8000/category/life/">
                                <i class="fa fa-folder-open fa-lg"></i> Life
                            </a>
                        </li>
                        <li class="list-group-item">
                            <a href="http://127.0.0.1:8000/category/managment/">
                                <i class="fa fa-folder-open fa-lg"></i> Managment
                            </a>
                        </li>
                        <li class="list-group-item">
                            <a href="http://127.0.0.1:8000/category/sre/">
                                <i class="fa fa-folder-open fa-lg"></i> SRE
                            </a>
                        </li>
                        <li class="list-group-item">
                            <a href="http://127.0.0.1:8000/category/thinking/">
                                <i class="fa fa-folder-open fa-lg"></i> Thinking
                            </a>
                        </li>
                        <li class="list-group-item">
                            <a href="http://127.0.0.1:8000/category/ui/">
                                <i class="fa fa-folder-open fa-lg"></i> UI
                            </a>
                        </li>
                        <li class="list-group-item">
                            <a href="http://127.0.0.1:8000/category/viewpoint/">
                                <i class="fa fa-folder-open fa-lg"></i> Viewpoint
                            </a>
                        </li>
                    </ul>
                </li>


        </ul>
    </section>

</aside>    </div>
    </div>
</div>
<footer>
   <div class="container">
      <hr>
      <div class="row">
         <div class="col-xs-10">&copy; 2005-2021 alswl
            &middot; Powered by <a href="https://github.com/alswl/pelican-bootstrap3" target="_blank" style="font-weight: bold">pelican-bootstrap3</a>,
            <a href="http://docs.getpelican.com/" target="_blank" style="font-weight: bold">Pelican</a>,
            <a href="http://getbootstrap.com" target="_blank" style="font-weight: bold">Bootstrap</a>,
            <p>
              <small> <a href="http://creativecommons.org/licenses/by-nc-nd/4.0/" rel="license"><img alt="Creative Commons License" style="border-width:0" src="https://4ocf5n.dijingchao.com/upload_dropbox/meta/by-nc-nd_4-0_80x15.png"></a> Content licensed under a <a href="http://creativecommons.org/licenses/by-nc-nd/4.0/" rel="license">Creative Commons Attribution 4.0 International-NonCommercial-NoDerivatives License</a>, except where indicated otherwise. </small>
            </p>
         </div>
         <div class="col-xs-2"><p class="pull-right"><i class="fa fa-arrow-up"></i> <a href="#">Back to top</a></p></div>
      </div>
   </div>
</footer>
<script src="https://cdn.staticfile.org/jquery/1.11.0/jquery.min.js"></script>

<!-- Include all compiled plugins (below), or include individual files as needed -->
<script src="https://cdn.staticfile.org/twitter-bootstrap/3.1.0/js/bootstrap.min.js"></script>

<!-- Enable responsive features in IE8 with Respond.js (https://github.com/scottjehl/Respond) -->

    <!-- Google Analytics -->
    <script type="text/javascript">

        var _gaq = _gaq || [];
        _gaq.push(['_setAccount', 'UA-8822123-3']);
        _gaq.push(['_trackPageview']);

        (function () {
            var ga = document.createElement('script');
            ga.type = 'text/javascript';
            ga.async = true;
            ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(ga, s);
        })();
    </script>
    <!-- End Google Analytics Code -->
</body>
</html>