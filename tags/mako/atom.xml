<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:content="http://purl.org/rss/1.0/modules/content/"><channel><title>mako on Log4D</title><link>https://blog.alswl.com/tags/mako/</link><description>Recent content in mako on Log4D</description><generator>Hugo -- gohugo.io</generator><language>en-us</language><lastBuildDate>Fri, 25 Nov 2011 00:00:00 +0800</lastBuildDate><atom:link href="https://blog.alswl.com/tags/mako/atom.xml" rel="self" type="application/rss+xml"/><item><title>dbevent2gc v0.1发布</title><link>https://blog.alswl.com/2011/11/dbevent2gc-v0-1-released/</link><pubDate>Fri, 25 Nov 2011 00:00:00 +0800</pubDate><guid>https://blog.alswl.com/2011/11/dbevent2gc-v0-1-released/</guid><description>重要通知：Log4D的域名由 http://dddspace.com 迁移到 http://log4d.com 。
订阅地址现在改为 http://log4d.com/feed 和 http://feeds.feedburner.com/dddspace 。（FeedBurner的地址未发生变化）
http://feed.dddspace.com 弃用
请订阅我博客的朋友更新一下订阅地址。
关于dbevent2gc A application to sync douban.com events to Google Calendar.
dbevent2gc是一个GAE应用，它将豆瓣同城的活动同步到Google Calendar的日历， 允许用户订阅活动而知道最近几周周边将发生活动。
dbevent2gc是基于Python/web.py/mako/iCalendar的，源代码地址在 https://github.com/alswl/dbevent2gc
使用方法 目前dbevent2gc运行在GAE上面，地址是 http://dbevent2gc.appspot.com （墙外） http://dbevent2gc.log4d.com/ （我做的本地反向代理） 登录这个地址可以选择需要订阅的城市和活动类型，然后会生成一个按钮， 点击这个按钮可以直接将选择的活动订阅到Google日历。
如果你无法翻墙，可以使用 [http://dbevent2gc.appspot.com/event/location/beijing?type=all](h ttp://dbevent2gc.appspot.com/event/location/beijing?type=all) 这样的地址添加到你的Google Calender里面。
接受的参数：
城市（把最后的beijing替换成你想要的城市拼音， 更多城市拼音查看这里 活动类型 type，支持all, commonweal, drama, exhibition, film, music, others, party, salon, sports, travel. 可选参数,默认为all 安装方法 如果想自己搭建GAE应用，也很简单，直接使用 git://github.com/alswl/dbevent2gc.git 就可以获取最新代码， 然后嘛去GAE注册一个应用，上传即可运行了。
dbevent2gc看上去可以用了，我昨晚发布了v0.1版本。
感兴趣的同学可以试试，现在的问题是获取的活动可能太多了，我后期会加上过滤功能（update 2011-11-26，我已经添加了活动类型选择功能）。</description></item><item><title>TypeError: sequence item 22: expected string or Unicode, long found</title><link>https://blog.alswl.com/2011/08/mako-typeerror/</link><pubDate>Thu, 25 Aug 2011 00:00:00 +0800</pubDate><guid>https://blog.alswl.com/2011/08/mako-typeerror/</guid><description>Mako 下面开发时候，遇到这个问题
TypeError: sequence item : expected string or Unicode, long found
Trace 的情况大概这样（我的错误信息无法再现，这是某位外国友人的错误信息）
File &amp;lsquo;/Users/amaslov/Projects/dou-pylons/doupy/doupy/controllers/ root.py&amp;rsquo;, line 239 in staticpage
return render(&amp;rsquo;/pages/%s.html&amp;rsquo; % name)
File &amp;lsquo;/Users/amaslov/Projects/dou-pylons/py/lib/python2.5/site- packages/Pylons-0.9.7-py2.5.egg/pylons/templating.py&amp;rsquo;, line 274 in render_mako
cache_type=cache_type, cache_expire=cache_expire)
File &amp;lsquo;/Users/amaslov/Projects/dou-pylons/py/lib/python2.5/site- packages/Pylons-0.9.7-py2.5.egg/pylons/templating.py&amp;rsquo;, line 249 in cached_template
return render_func()
File &amp;lsquo;/Users/amaslov/Projects/dou-pylons/py/lib/python2.5/site- packages/Pylons-0.9.7-py2.5.egg/pylons/templating.py&amp;rsquo;, line 271 in render_template
return literal(template.render_unicode(**globs))
File &amp;lsquo;/Users/amaslov/Projects/dou-pylons/py/lib/python2.5/site- packages/Mako-0.2.4-py2.5.egg/mako/template.py&amp;rsquo;, line 138 in render_unicode return runtime.render(self, self.callable, args, data, as_unicode=True) File &amp;lsquo;/Users/amaslov/Projects/dou-pylons/py/lib/python2.5/site- packages/Mako-0.2.4-py2.5.egg/mako/runtime.py&amp;rsquo;, line 348 in _render</description></item><item><title>一个mako.vim</title><link>https://blog.alswl.com/2011/06/mako-vim/</link><pubDate>Thu, 09 Jun 2011 00:00:00 +0800</pubDate><guid>https://blog.alswl.com/2011/06/mako-vim/</guid><description>给Vim找了一个Mako的语法高亮，发现着色居然有问题。查看更新记录后发现作者Armin Ronacher只更新到08年9月份。之后Mako更新了一些少许细节，我修改了一下mako.vim，放在这里供下载。
其实我只改了57/58行，增加一个block语法。
点击这里下载：mako.vim
使用方法，放入vimfiles/syntax
相关链接：
原始mako.vim：http://www.vim.org/scripts/script.php?script_id=1858
另外一个mako.vim是缩进用的，放入vimfiles/syntax：http://www.vim.org/scripts/script.php?script_id=2663
ps：Mako是一个Python下面的Template框架。
pss：貌似服务器ip被认证了，讨厌~</description></item><item><title>Pylons使用小记</title><link>https://blog.alswl.com/2011/05/pylons/</link><pubDate>Mon, 16 May 2011 00:00:00 +0800</pubDate><guid>https://blog.alswl.com/2011/05/pylons/</guid><description>活着就是折腾，最近事情多的一塌糊涂，烦躁的很，导致log4d也荒废一个月了。今天趁着周五晚上，梳理一下最近学习的pylons知识。
关于Pylons Pylons是一个用pythons写的web框架，优点是配置灵活，默认使用[Mako](http: //www.makotemplates.org/)作为Template，SQLAlchemy作为 ORM映射。使用BSD作为授权协议。
托WSGI的福，python的web框架超多，甚至高手5分钟可以自己手写一个web框架，这种情况也导致了Python web框架的纷杂。我这里选择Pylons（其实是被选择），并不是说Pylons一定最好，而是比较适合当前项目。更多的Python web框架对比建议看这篇[浅谈Python web框架](http://feilong.me/2011/01/talk-about-python-web- framework)，另外，这个Best Web- Framework有直观的对比。
Pylons环境配置 因为开发机是刚到手的ThinkPad，没有冒险安装Linux，所以这里的安装环境是Win7 + Python 2.6 + MySQL5.1。
1、安装Pylons Pylons似乎没有方便的easy_install，原因是由于Pylons在安装过程中，会生成一个目标环境。这个环境包括完整的Python环境，从而与系统自 带Python环境独立开来，防止第三方库的相互污染。Pylons官方提供了一个Python go- pylons.py脚本进行安装。
通过在shell键入命令python go-pylons.py myb_env安装，其中myb_env代表目标环境，会在当前目录下面生成一个myb_en v文件夹，myb_env也可以使用绝对路径代替。在生成完之后请不要随意移动这个目录，因为环境里生成的Python脚本硬编码了绝对路径。
2、安装mysql-python驱动 我使用的是MySQL数据库，使用mysql-python驱动，windows下具体安装过程可以参见[http://fendou.org/2010/06/17 /install-python26-mysql-python-on-windows/](http://fendou.org/2010/06/17 /install-python26-mysql-python-on-windows/) 需要修改一下源码和加入几个dll。
3、生成egg包，下载第三方依赖 在目标项目下面，执行python setup.py develop，这将执行项目需要的三方依赖，设定依赖可以到setup.py中install_req uires进行配置。这个步骤用到了easy_install，所以请确保python/script下面有easy_install的可执行文件。windows 下安装easy_install可以参考这里[http://thinkhole.org/wp/2007/02/01/howto-install- setuptools-in-windows/](http://thinkhole.org/wp/2007/02/01/howto-install- setuptools-in-windows/)。
呼啦啦一大串命令跑完之后，就ok了。
4、安装额外的三方依赖（可选） 根据实际情况操作吧，我这里使用了easy_install python-memcached和easy_install pil，前者是memcache的python驱动，后者是python图形库。
5、初始化数据库 托SQLAlchemy的福，我们可以让它自动给我们创建映射表。首先确保在model下面配置好model类。
class Person(Base): __tablename__ = &amp;quot;person&amp;quot; id = Column(Integer, primary_key=True)
name = Column(String(100))
email = Column(String(100))
def init(self, name=&amp;rsquo;&amp;rsquo;, email=&amp;rsquo;&amp;rsquo;):
self.name = name</description></item></channel></rss>