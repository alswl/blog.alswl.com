<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:content="http://purl.org/rss/1.0/modules/content/">
  <channel>
    <title>贴吧 on Log4D</title>
    <link>https://blog.alswl.com/tags/%E8%B4%B4%E5%90%A7/</link>
    <description>Recent content in 贴吧 on Log4D</description>
    <generator>Hugo -- 0.125.3</generator>
    <language>zh</language>
    <lastBuildDate>Tue, 17 Nov 2009 00:00:00 +0800</lastBuildDate>
    <atom:link href="https://blog.alswl.com/tags/%E8%B4%B4%E5%90%A7/rss.xml" rel="self" type="application/rss+xml" />
    <item>
      <title>Java笔记 使用反射来改进BaseDao</title>
      <link>https://blog.alswl.com/2009/11/note-the-use-of-java-reflection-to-improve-the-basedao/</link>
      <pubDate>Tue, 17 Nov 2009 00:00:00 +0800</pubDate>
      <guid>https://blog.alswl.com/2009/11/note-the-use-of-java-reflection-to-improve-the-basedao/</guid>
      <description>关于反射 反射的定义（via Wiki）：在计算机科学中，反射是指一种特定类型的计算机程序能够在运行时以一种依 赖于它的代码的抽象特性和它的运行时行为的方式被更改的特性。用比喻来说，那种程式能够&amp;quot;观察&amp;ldquo;并且修改自己的行为。 Java中的反射示例如下： package dddspace.job.exercise1116; public class Foo { public void fun(String str) { System.out.println(str); } } package dddspace.job.exercise1116; import java.lang.reflect.InvocationTargetException; import java.lang.reflect.Method; public class ReflectionDemo { public static void main(String[] args) throws SecurityException, NoSuchMethodException, ClassNotFoundException, InstantiationException, IllegalAccessException, IllegalArgumentException, InvocationTargetException { // 不使用反射 Foo foo = new Foo(); foo.fun(&amp;#34;no reflection&amp;#34;); // 使用反射 String className = &amp;#34;dddspace.job.exercise1116.Foo&amp;#34;; String funName = &amp;#34;fun&amp;#34;; // 获取类</description>
      <content:encoded><![CDATA[<h2 id="关于反射">关于反射</h2>
<p>反射的定义（via <a href="http://zh.wikipedia.org/zh-cn/%E5%8F%8D%E5%B0%84_%28%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%A7%91%E5%AD%A6%29">Wiki</a>）：在计算机科学中，反射是<strong>指一种特定类型的计算机程序能够在运行时以一种依
赖于它的代码的抽象特性和它的运行时行为的方式被更改</strong>的特性。用比喻来说，那种程式能够&quot;<strong>观察</strong>&ldquo;并且修改自己的行为。</p>
<p>Java中的反射示例如下：</p>
<pre tabindex="0"><code>    package dddspace.job.exercise1116;

public class Foo {

public void fun(String str) {

System.out.println(str);

}

}


    package dddspace.job.exercise1116;

import java.lang.reflect.InvocationTargetException;

import java.lang.reflect.Method;

public class ReflectionDemo {

public static void main(String[] args) throws SecurityException,

NoSuchMethodException, ClassNotFoundException, InstantiationException,

IllegalAccessException, IllegalArgumentException,

InvocationTargetException {

// 不使用反射

Foo foo = new Foo();

foo.fun(&#34;no reflection&#34;);


// 使用反射

String className = &#34;dddspace.job.exercise1116.Foo&#34;;

String funName = &#34;fun&#34;;

// 获取类名

Class cls = Class.forName(className);

// 创建Object实例

Object foo2 = cls.newInstance();

// 创建Method hello

Method method = cls.getMethod(&#34;fun&#34;, String.class);

// 使用反射来调用Method的invode方法，参数是目标对象+参数

method.invoke(foo, &#34;use reflection&#34;);

}

}
</code></pre><h2 id="原始basedao设计">原始BaseDao设计</h2>
<p>我先阐述一下BaseDao的设计想法：BaseDao是一个<strong>抽象类</strong>，提供一系列Dao方法&rdquo;<strong>get()/getAll()/add()/update()/delete()/getCount()</strong>&quot;，通过<strong>泛型匹配</strong>的获取类，我取出一个方法来做示例。</p>
<pre tabindex="0"><code>    public int getCount()
    {
    	int count = 0;
    	Session session = null;
    	Transaction tx = null;
    	String Tstr = getClass().getSimpleName().substring (0,
    			getClass().getSimpleName().length() - 3);
    	String hql = &#34;select count(*) from &#34; + Tstr;
    	try {
    		session = HibernateSessionFactory.currentSession();
    		tx = session.beginTransaction();
    		Query query = session.createQuery(hql);
    		count = Integer.parseInt(query.uniqueResult().toString());
    		query = null;
    		tx.commit();
    	} catch (HibernateException e) {
    		if (tx != null) {
    			tx.rollback();
    		}
    		throw e;
    	} finally {
    		HibernateSessionFactory.closeSession();
    	}				
    	return count;
    }
</code></pre><p>其中有一段<strong>dirty work</strong>，就是TStr的获取，这段TStr是想从实现Dao类获取实体类的类型名称，也就是
从&quot;TopicDao&quot;获取&quot;Topic&quot;这个类型名称。整个BaseDao的泛型设计不错，但是在这一段上面存在一段dirty work，始终让我不爽。</p>
<h2 id="重构basedao和topicdao">重构BaseDao和TopicDao</h2>
<p>我今天复习完抽象类/接口/反射这些内容，又在纸上画了一个模型，觉得用这种新方法解决会更好一点。</p>
<p>给抽象类BasoDao加入新的变量Class c，然后在TopicDao初始化时候对Class
c进行设置为Topic.class，这样就比原来的拼字符串好的多。耦合也显得漂亮了</p>
<pre tabindex="0"><code>    public abstract class BaseDAO&lt;T&gt; {
    	
    	protected Class c;
    	
    	private Logger logger = Logger.getLogger(this.getClass());
    	
    	/**
    	 * 根据某个Bean的beanId取出Bean
    	 * @param tId
    	 * @return Bean
    	 */
    	public T get(int tId)
    	{
    		T t=null;
    		Session session = null;
    		Transaction tx = null;
    		// 原始设计
    //		String Tstr = getClass().getSimpleName().substring (0,
    //				getClass().getSimpleName().length() - 3);
    		// 获取c的名称
    		String Tstr = c.getSimpleName();
    		String TstrId = Tstr+&#34;Id&#34;;
    		String hql = &#34;from &#34; + Tstr + &#34; where &#34; +
    			TstrId.substring(0, 1).toLowerCase() + TstrId.substring(1) + &#34; = ?&#34;;
    		try {
    			session = HibernateSessionFactory.currentSession();
    			tx = session.beginTransaction();
    			Query query = session.createQuery(hql);
    			query.setInteger(0,tId);
    			t = (T)query.uniqueResult();
    			query = null;
    			tx.commit();
    		} catch (HibernateException e) {
    			if (tx != null) {
    				tx.rollback();
    			}
    			throw e;
    		} finally {
    			HibernateSessionFactory.closeSession();
    		}		
    		return t;
    	}
    
    public class TopicDAO extends BaseDAO&lt;Topic&gt;{
    		
    	private Logger logger = Logger.getLogger(this.getClass());
    	/**
    	 * 根据froumId取出某一吧内的所有没被屏蔽的帖子
    	 * @param froumId
    	 * @return ArrayList&lt;Topic&gt; 
    	 * @throws HibernateException
    	 */
    	// 在构造函数中进行c的设置
    	public TopicDAO () {
    		c = Topic.class;
    	}
    	//doSomething
    }
</code></pre><p>这样完成之后，就完成了一次简单的重构，实现了<strong>变化点分离</strong>，而且不那么dirty。</p>
<p>本文的代码来源自PostBar项目。这里有<a href="http://code.google.com/p/postbar/">Google Code链接</a>，v1.0.1的代码并没有上文的实现，本文中的修改还在trunk中。</p>
]]></content:encoded>
    </item>
    <item>
      <title>贴吧小结报告</title>
      <link>https://blog.alswl.com/2009/07/summary-report-of-post-bar/</link>
      <pubDate>Thu, 02 Jul 2009 00:00:00 +0800</pubDate>
      <guid>https://blog.alswl.com/2009/07/summary-report-of-post-bar/</guid>
      <description>终于完成了这个贴吧系统，虽然还有很多地方不完善，但是却包含了我很多心血和精力，也实践了我的很多想法。 具体的不说了，稍微说一下开发使用的技术：Java、Struts2、Hibernate、OGNL、Eclipse、Tomcat、MySQL、AJAX、jQue ry、SVN、UP开发模式、UML。 之中学习了很多内容，我恨兴奋，说起来这是我第一个完整写的一个网站系统，之前的asp啊，asp.NET多多少少</description>
      <content:encoded><![CDATA[<p>终于完成了这个贴吧系统，虽然还有很多地方不完善，但是却包含了我很多心血和精力，也实践了我的很多想法。</p>
<p>具体的不说了，稍微说一下开发使用的技术：Java、Struts2、Hibernate、OGNL、Eclipse、Tomcat、MySQL、AJAX、jQue
ry、SVN、UP开发模式、UML。</p>
<p>之中学习了很多内容，我恨兴奋，说起来这是我第一个完整写的一个网站系统，之前的asp啊，asp.NET多多少少借鉴了别人的代码。</p>
<p>终于知道其实资历代表着经验，很多东西只有自己试过才知道怎么做，这一块我太欠缺了，对于JaveEE开发，也终于开始有了接触，寒假回家3个星期，应该在Java的
本质技术上合Hibernate高级内容、设计模式上花时间了。</p>
<p>09_11_16 Update:</p>
<p>今天又check out了一下，然后加入About和Links，当初贴吧在课程设计之后就没有完善，现在加上这两个模块，也就能release了。</p>
<p>相关链接：</p>
<p><a href="http://code.google.com/p/postbar/">项目在Google Code托管 </a>（你可以check
out，不知道游客有没有权限，需要可以Mail我）</p>
<p><a href="http://log4d.com/tag/postbar">相关开发博客链接 </a></p>
]]></content:encoded>
    </item>
    <item>
      <title>贴吧中期进度汇报</title>
      <link>https://blog.alswl.com/2009/06/affixed-to-it-the-progress-report-on-the-medium-term/</link>
      <pubDate>Sat, 27 Jun 2009 00:00:00 +0800</pubDate>
      <guid>https://blog.alswl.com/2009/06/affixed-to-it-the-progress-report-on-the-medium-term/</guid>
      <description>查看sql更新版本，我才发现这个项目已经做了将近2个月了。 之前一个多月都是我有空就做做，一边要写OpenSSL的模型，还要应付平时学习和考试，最近的1个星期，才开始全身心投入的，使这个项目变成了一个课程设计，但决不 止于课程设计。 由于鸡鸡的加入，而且对原先设计的一些不满意，我用UP的方式重新对系统进行了设计，从用例到实际类图，都重新设计并加以重构。 这是一个很有意义的过程，我花了很多时间在UML的使用</description>
      <content:encoded><![CDATA[<p>查看sql更新版本，我才发现这个项目已经做了将近2个月了。</p>
<p>之前一个多月都是我有空就做做，一边要写OpenSSL的模型，还要应付平时学习和考试，最近的1个星期，才开始全身心投入的，使这个项目变成了一个课程设计，但决不
止于课程设计。</p>
<p>由于鸡鸡的加入，而且对原先设计的一些不满意，我用UP的方式重新对系统进行了设计，从用例到实际类图，都重新设计并加以重构。</p>
<p>这是一个很有意义的过程，我花了很多时间在UML的使用上，用的是StarUML（开始使用Rose，发现太难入门了），继烨负责用例，我是在设计完第一个迭代过程之
后进行编写代码的。</p>
<p>原计划是尽量设计之后再编码，但是由于时间关系被迫提前编码，这样，整个过程相对的倾向于敏捷，这其实也是我最开始想要的效果。</p>
<p>写着写着，越发的理解设计的重要性，往往一个小错误会影响很多改变，很多东西没有一定经验真的很难做优秀。</p>
<p>今天的代码提交到Google
Code之后，基本接近我之前自己完成的程度，但我觉得这次的重构，使我学到了很多平时没接触到的东西。两个人的协作也使我完全体会到SVN的好处。</p>
<p>以上是贴吧中期报告。</p>
<h4 id="相关链接">相关链接：</h4>
<p>PostBar in Google Project Host&lt;<a href="http://code.google.com/p/postbar/">猛击这里打开</a>&gt;</p>
<p>PostBar svn-readonly&lt;<a href="http://postbar.googlecode.com/svn/trunk/postbar-read-only">猛击这里打开</a>&gt;</p>
]]></content:encoded>
    </item>
    <item>
      <title>Struts2中Ajax的使用</title>
      <link>https://blog.alswl.com/2009/05/struts2-in-the-use-of-ajax/</link>
      <pubDate>Sat, 23 May 2009 00:00:00 +0800</pubDate>
      <guid>https://blog.alswl.com/2009/05/struts2-in-the-use-of-ajax/</guid>
      <description>贴吧1.0差不多可以完成了，进入界面美化，我服务器验证写完之后，开始用jQuery写js。 使用了jQuery的UI，后来想加入Ajax验证，但是遇到了问题： 09-05-23 07:53 WARN [org.apache.struts2.dispatcher.Dispatcher] - Could not find action or result There is no Action mapped for namespace / and action name AjaxLogin. - [unknown location] 我整整找了一个多小时，曾以为是action name的问题或者是package name, package namespace 的问题，为此我特意重新学习了一下他们的使用方法，但是仍然没有效果。 最后，终于在Google找到了一些资料： struts2 json</description>
      <content:encoded><![CDATA[<p>贴吧1.0差不多可以完成了，进入界面美化，我服务器验证写完之后，开始用jQuery写js。</p>
<p>使用了jQuery的UI，后来想加入Ajax验证，但是遇到了问题：</p>
<p>09-05-23 07:53 WARN [org.apache.struts2.dispatcher.Dispatcher] - Could not
find action or result</p>
<p>There is no Action mapped for namespace / and action name AjaxLogin. -
[unknown location]</p>
<p>我整整找了一个多小时，曾以为是action name的问题或者是package name, package namespace
的问题，为此我特意重新学习了一下他们的使用方法，但是仍然没有效果。</p>
<p>最后，终于在Google找到了一些资料：</p>
<p><a href="http://huqilong.blog.51cto.com/53638/136802">struts2 json jquery 集成详解</a>来自
户起龙的博客</p>
<p>我本来以为Struts/lib下面的json-lib-2.1.jar就可以了，而且启动Tomcat没有任何报错，居然要另外一个jar，叫做json-
plugin</p>
<p>下载地址：<a href="http://code.google.com/p/jsonplugin/downloads/list">猛击这里下载</a></p>
<p>使用这个插件之后，本以为轻松搞定，但是仍然还是这个错误！！！</p>
<p>怎么可能？！我怒了，翻开Struts2的文档，文档用的是DWR，已经使用taglib封装了，再查看json-plugin的文档，仍然未果！！</p>
<p>最后逼急了，使用这篇文章 《在Struts 2中使用JSON Ajax支持》<a href="http://webservices.ctocio.com.cn/tips/424/7670924.shtml">猛击这里打开</a>，重新写了一个Action和一个简单的jsp页面，使用最淳朴的<submit>提交。终于可以成功了，数据交
换能够明显的在FireBug下看到。</p>
<p>这种情况的话，据我猜测，应该是我原来使用的&lt;s:form&gt;标签的问题，如果使用简单的<form>就应该可以避免了。</p>
<p>09_05_24修正</p>
<p>之前说是&lt;s:form&gt;的问题，而用<form>可以解决，结果我发现<form>也不行，直接返回当前页面，这就比较郁闷了，最后，我把<form>去除，只留下
<input type="submit">就可以了，不好意思，让Strut2蒙冤了。</p>
]]></content:encoded>
    </item>
    <item>
      <title>乱码之战</title>
      <link>https://blog.alswl.com/2009/05/battle-of-garbled/</link>
      <pubDate>Fri, 22 May 2009 00:00:00 +0800</pubDate>
      <guid>https://blog.alswl.com/2009/05/battle-of-garbled/</guid>
      <description>今天重新设计了贴吧的数据库，参考了WordPress的无外键，设置default的值，我取消了两个外键，仅保留一个对应CategoryId的外键。 修改数据库时候发现MySQL的charset还是&amp;rsquo;latin&amp;rsquo;，就顺手修改成&amp;rsquo;utf-8&amp;rsquo;来保证统一，结果就出事了。 因为我修改了DAO，单元测试之后重新走一遍网页测试流程，结果发帖时候遇到乱码。 一回生两回熟</description>
      <content:encoded><![CDATA[<p>今天重新设计了贴吧的数据库，参考了WordPress的无外键，设置default的值，我取消了两个外键，仅保留一个对应CategoryId的外键。</p>
<p>修改数据库时候发现MySQL的charset还是&rsquo;latin&rsquo;，就顺手修改成&rsquo;utf-8&rsquo;来保证统一，结果就出事了。</p>
<p>因为我修改了DAO，单元测试之后重新走一遍网页测试流程，结果发帖时候遇到乱码。</p>
<p>一回生两回熟，咱也不怕。</p>
<p>在Action里面设置logger，输出相应的数据，发现那里就是乱码，说明在Severlet或者Interceptor那里就出了问题。</p>
<p>仿照上次设置Tomcat字符集，详情见<a href="../2009/05/12238.html">Eclipse中开发的Jave EE项目在Tomcat的部署
</a>，但是测试发现没有效果。</p>
<p>接着查看web.xml，发现里面还有Spring的filter，贴吧现阶段还没有加入Spring，删除，有一个编码过滤器org.apache.struts2
.dispatcher.FilterDispatcher，采用org.apache.struts2.dispatcher.FilterDispatcher可
以不适用，删除。</p>
<p>这么一删，就发现乱码问题解决了。</p>
<p>呵呵，只要人类还有很多语言，乱码仍然会存在，遇到了不要怕，慢慢调试就出来了</p>
]]></content:encoded>
    </item>
    <item>
      <title>Struts2的s:if标签的Bug和曲线使用</title>
      <link>https://blog.alswl.com/2009/05/struts2-tags-the-curve-of-the-bug-and-the-use-of/</link>
      <pubDate>Thu, 21 May 2009 00:00:00 +0800</pubDate>
      <guid>https://blog.alswl.com/2009/05/struts2-tags-the-curve-of-the-bug-and-the-use-of/</guid>
      <description>贴吧的用户状态显示，登录和未登录应该是不同的div显示，我决定用做标签。 本来应该很简单的事情，却没有我预想中的情形出现，检查后发现失效了，代码如下： &amp;lt;li&amp;gt;${session.userName}欢迎你&amp;lt;/li&amp;gt; &amp;lt;li&amp;gt;&amp;lt;a href=&amp;quot;Logout.action&amp;quot;&amp;gt;注销&amp;lt;/a&amp;gt;&amp;lt;/li&amp;gt; Struts2的官方文档中标签库介绍写的很清楚，官</description>
      <content:encoded><![CDATA[<p>贴吧的用户状态显示，登录和未登录应该是不同的div显示，我决定用做标签。</p>
<p>本来应该很简单的事情，却没有我预想中的情形出现，检查后发现失效了，代码如下：</p>
<pre><code>&lt;li&gt;${session.userName}欢迎你&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;Logout.action&quot;&gt;注销&lt;/a&gt;&lt;/li&gt;
</code></pre>
<p>Struts2的官方文档中标签库介绍写的很清楚，官方示例文档如下</p>
<pre><code>&lt;s:if test=&quot;%{false}&quot;&gt;
&lt;div&gt;Will Not Be Executed&lt;/div&gt;
&lt;/s:if&gt;
&lt;s:elseif test=&quot;%{true}&quot;&gt;
&lt;div&gt;Will Be Executed&lt;/div&gt;
&lt;/s:elseif&gt;
&lt;s:else&gt;
&lt;div&gt;Will Not Be Executed&lt;/div&gt;
&lt;/s:else&gt;
</code></pre>
<p>我现在敢打包票，这个示例无法成功运行。</p>
<p>OGNL有三种取值方式，%,$和#，我之前已经转载过一篇小介绍，按官方文档，这里的$是应该起作用的，但是很可惜，这儿出现了错误。</p>
<p>网友阿木的博客讨论了相关问题：[struts2的if标签](<a href="http://blog.sina.com.cn/s/blog_5cecbc550100ck4f">http://blog.sina.com.cn/s/blog_5cecbc550100ck4f</a>.
html)，我没有像他那样详细测试，尝试几次后，代码修改为：</p>
<pre><code>&lt;li&gt;${session.userName}欢迎你&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;Logout.action&quot;&gt;注销&lt;/a&gt;&lt;/li&gt;
</code></pre>
<p>使用#选择符，而不是其他的，这样就可以正确运行了。</p>
]]></content:encoded>
    </item>
    <item>
      <title>一个Action提交的问题</title>
      <link>https://blog.alswl.com/2009/05/to-submit-the-issue-of-an-action/</link>
      <pubDate>Sat, 09 May 2009 00:00:00 +0800</pubDate>
      <guid>https://blog.alswl.com/2009/05/to-submit-the-issue-of-an-action/</guid>
      <description>贴吧在提交帖子时候必须提供贴吧分类id categoryId，但是怎么把这个id提交到PostAction就比较麻烦了，在jsp页面中我试了好多办法，尝试使 用param和hidden（baidu用的hidden）标签，但是都不能读出cagegory.jsp页面的categoryId值。 最后我索性用试所有的表达式 &amp;lt;s:hidden name=&amp;quot;topicCategoryId&amp;quot; value=&amp;quot;%{#categoryId}&amp;quot; /&amp;gt; &amp;lt;s:hidden name=&amp;quot;topicCategoryId&amp;quot; value=&amp;quot;#categoryId&amp;quot; /&amp;gt; &amp;lt;s:hidden name=&amp;quot;topicCategoryId&amp;quot; value=&amp;quot;%{categoryId}&amp;quot; /&amp;gt; 最后一个果然有效。。。 貌似记得这是OPGL表达式？****</description>
      <content:encoded><![CDATA[<p>贴吧在提交帖子时候必须提供贴吧分类id categoryId，但是怎么把这个id提交到PostAction就比较麻烦了，在jsp页面中我试了好多办法，尝试使
用param和hidden（baidu用的hidden）标签，但是都不能读出cagegory.jsp页面的categoryId值。</p>
<p>最后我索性用试所有的表达式</p>
<pre><code>&lt;s:hidden name=&quot;topicCategoryId&quot; value=&quot;%{#categoryId}&quot; /&gt;
&lt;s:hidden name=&quot;topicCategoryId&quot; value=&quot;#categoryId&quot; /&gt;
&lt;s:hidden name=&quot;topicCategoryId&quot; value=&quot;%{categoryId}&quot; /&gt;
</code></pre>
<p>最后一个果然有效。。。</p>
<p>貌似记得这是OPGL表达式？****</p>
]]></content:encoded>
    </item>
    <item>
      <title>乱码！又见乱码！</title>
      <link>https://blog.alswl.com/2009/05/garbled-see-also-garbled/</link>
      <pubDate>Sat, 09 May 2009 00:00:00 +0800</pubDate>
      <guid>https://blog.alswl.com/2009/05/garbled-see-also-garbled/</guid>
      <description>今天解决了贴吧发帖的问题，可以正确的发送到正确的分类了。 随后遇到的问题是发帖完毕返回 Category.action 时候，无法读取争取的贴吧分类数据，经过在 struts.xml 里的Category.action 里的 result 后面的url加入参数，可以读取正确categoryId了 本来想在result中加入param元素而不是在url后面加 ？categoryId=0来实现，但是尝试了好久，Google和官方文档都没有什么解决方案 其中遇到的一个问题是「&amp;a</description>
      <content:encoded><![CDATA[<p>今天解决了贴吧发帖的问题，可以正确的发送到正确的分类了。</p>
<p>随后遇到的问题是发帖完毕返回 Category.action 时候，无法读取争取的贴吧分类数据，经过在 struts.xml
里的Category.action 里的 result 后面的url加入参数，可以读取正确categoryId了</p>
<p>本来想在result中加入param元素而不是在url后面加 ？categoryId=0来实现，但是尝试了好久，Google和官方文档都没有什么解决方案</p>
<p>其中遇到的一个问题是「&amp;」这个符号不能直接使用，需要进行转义，用「&amp;」来替代。</p>
<p>最后是categoryName的问题了，本来以为很简单，却遇到了编码问题，之前从Home.action转到Category.action能正确编码，像 ht
tp://localhost:8080/PostBar/Category.action?categoryId=4&amp;categoryName=%E9%9F%B
3%E4%B9%90 ，而现在的categoryName后面却有乱码</p>
<p>最恨乱码问题，整整花了我将近2小时，仍然没有完美解决方法，只能勉强在PostTopic.action转到Category.action时进行Encode编码
，但是这十足dirty work，而且不方便再次读取categoryName。</p>
<p>我尝试在struts.xml用OGNL语言进行转换，但是却无法运行，找不出问题。</p>
<p>实在没有办法了，现在我准备用Baidu这种url形式，只传递categoryId，而在此用Hibernate读取数据库去除categoryName来获得内容</p>
<p>当初之所以考虑多次传递时怕读取数据库会导致性能大幅度下降，今天又学习了一下Hibernate的缓存机制，感觉是我多虑了，二级缓存应该能大大缓解多次读取的问题
。</p>
]]></content:encoded>
    </item>
    <item>
      <title>解决 Null value was assigned to a property</title>
      <link>https://blog.alswl.com/2009/05/solve-the-null-value-was-assigned-to-a-property/</link>
      <pubDate>Fri, 08 May 2009 00:00:00 +0800</pubDate>
      <guid>https://blog.alswl.com/2009/05/solve-the-null-value-was-assigned-to-a-property/</guid>
      <description>晚上开始写贴吧分类，把class改成category，规避了关键字class，也显得更合理，百度的分类就是ct 然后在分类上遇到一个小问题，category_father在数据库是integer类型，可以为null，因为存在根分类，在这种情况下用Hibernate读取 Category时会产生错误 在jUnit单元测试中就通不过，错误为 org.hibernate.PropertyAccessException: Null value was assigned to a property Google后，发现Category中定义categ</description>
      <content:encoded><![CDATA[<p>晚上开始写贴吧分类，把class改成category，规避了关键字class，也显得更合理，百度的分类就是ct</p>
<p>然后在分类上遇到一个小问题，category_father在数据库是integer类型，可以为null，因为存在根分类，在这种情况下用Hibernate读取
Category时会产生错误</p>
<p>在jUnit单元测试中就通不过，错误为 org.hibernate.PropertyAccessException: Null value was
assigned to a property</p>
<p>Google后，发现Category中定义categoryFather为int类型，是不支持null的，需要改为Wrapper类Interger</p>
<p>有人说只需要设定setXXX和getXXX的Integer的类型和.hbm.xml文件中个Type=&ldquo;java.lang.Integer&quot;就可以了</p>
<p>但是经过我测试发现，categoryFather 这个成员也要定义成Interger，否则会报错
org.hibernate.PropertyAccessException: Exception occurred inside setter of &hellip;</p>
<p>晚上写完分类，感慨到：框架先行，功能其后，界面殿后。由于我home.jsp和category.jsp没有安排好，导致了很多问题。尽管有Eclipse的ren
ame功能，把class改为category依然很麻烦</p>
]]></content:encoded>
    </item>
    <item>
      <title>贴吧进度-09-05-07</title>
      <link>https://blog.alswl.com/2009/05/post-bar-progress-09-05-07/</link>
      <pubDate>Thu, 07 May 2009 00:00:00 +0800</pubDate>
      <guid>https://blog.alswl.com/2009/05/post-bar-progress-09-05-07/</guid>
      <description>今天写到创建帖子，在编码上遇到问题，jUnit下调用函数没有任何问题，那就表示问题出在Struts Filter捕获的文本上。 找了好几个方法都没有奏效。 游客登录情况下的Session还存在一点问题，原因是session类型转换上的问题，今天还没有好好的研究一下。 至此为止，登录注册写完了，静态校验写了一个毛胚，今天写完的现实帖子的列表，表现层用OGNL完成的，终于脱离开代码混杂的页面。 解决了一个tx.</description>
      <content:encoded><![CDATA[<p>今天写到创建帖子，在编码上遇到问题，jUnit下调用函数没有任何问题，那就表示问题出在Struts Filter捕获的文本上。</p>
<p>找了好几个方法都没有奏效。</p>
<p>游客登录情况下的Session还存在一点问题，原因是session类型转换上的问题，今天还没有好好的研究一下。</p>
<p>至此为止，登录注册写完了，静态校验写了一个毛胚，今天写完的现实帖子的列表，表现层用OGNL完成的，终于脱离开代码混杂的页面。</p>
<p>解决了一个tx.commit的错误，原来是《开发者突击》书上的代码有问题，我参考了Hibernate的官方文档，终于发现了错误的原因，tx.rollback
()应该在catch里面而不是final里面。</p>
<p>写着写着就感觉自己太多的不足，太多要学习的地方，加油！</p>
]]></content:encoded>
    </item>
  </channel>
</rss>
