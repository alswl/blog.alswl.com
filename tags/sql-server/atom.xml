<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:content="http://purl.org/rss/1.0/modules/content/"><channel><title>sql server on Log4D</title><link>https://blog.alswl.com/tags/sql-server/</link><description>Recent content in sql server on Log4D</description><generator>Hugo -- gohugo.io</generator><language>en-us</language><lastBuildDate>Tue, 19 Sep 2017 16:43:45 +0800</lastBuildDate><atom:link href="https://blog.alswl.com/tags/sql-server/atom.xml" rel="self" type="application/rss+xml"/><item><title>一个关于 nolock 的故事：深入理解数据库隔离级别</title><link>https://blog.alswl.com/2017/09/sql-server-nolock/</link><pubDate>Tue, 19 Sep 2017 16:43:45 +0800</pubDate><guid>https://blog.alswl.com/2017/09/sql-server-nolock/</guid><description>加入沪江不久，我就被扔到一个将集团 SQL Sever 的数据库迁移到 MySQL 的项目里， 同时伴随进行的还有 .net 系统迁移到 Java 系统。 在这个过程中我发现了一个很有趣的现象：历史遗留的 .net 项目中， 几乎所有的 SQL 中都会使用一个关键字：nolock。 这让我很困惑，nolock 的字面意思是对当前技术不使用锁技术，为什么要这样用呢？
我找了一个范例如下：
SELECT [id] FROM [dbo].[foos] WITH(nolock) WHERE aField = 42 AND bField = 1 作为横向支持工程师，开发工程师会问我：「数据库即将从 SQL Server 迁移到 MySQL，我们编码中还需要使用 nolock 么？ MySQL 里面对应的写法是什么？」。 我并没有 SQL Server 的生产环境使用经验，一时间无法回答。 于是课后做相关知识学习，这里就是这次学习的一点成果。
这个问题将被拆解成三个小问题进行回答：
nolock 是什么？ 为什么会需要在每个 Query 语句使用 nolock？ MySQL 的对应写法是什么？ 让我们一个一个来看。
第一个问题：nolock 是什么？ nolock 是 SQL Server 的一个关键字，这类关键字官方将其称之为 Hints。 Hints 的设计目的是为了能够让 SQL 语句在运行时，动态修改查询优化器的行为。 在语法上，Hints 以 WITH 开头。除了 WITH(nolock)， 还有 TABLOCK / INDEX / ROWLOCK 等常见的 Hints。</description></item></channel></rss>