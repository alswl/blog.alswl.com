<!DOCTYPE html>
<html lang="en" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>coding | Log4D</title>
<meta name="keywords" content="">
<meta name="description" content="">
<meta name="author" content="alswl">
<link rel="canonical" href="https://blog.alswl.com/categories/coding/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.bc1149f4a72aa4858d3a9f71462f75e5884ffe8073ea9d6d5761d5663d651e20.css" integrity="sha256-vBFJ9KcqpIWNOp9xRi915YhP/oBz6p1tV2HVZj1lHiA=" rel="preload stylesheet" as="style">
<link rel="icon" href="https://blog.alswl.com/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="https://blog.alswl.com/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://blog.alswl.com/favicon-32x32.png">
<link rel="apple-touch-icon" href="https://blog.alswl.com/apple-touch-icon.png">
<link rel="mask-icon" href="https://blog.alswl.com/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<link rel="alternate" type="application/rss+xml" href="https://blog.alswl.com/categories/coding/atom.xml">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --hljs-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript>
<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
	ga('create', 'UA-8822123-3', 'auto');
	
	ga('send', 'pageview');
}
</script><meta property="og:title" content="coding" />
<meta property="og:description" content="" />
<meta property="og:type" content="website" />
<meta property="og:url" content="https://blog.alswl.com/categories/coding/" /><meta property="og:site_name" content="Log4D" />

<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="coding"/>
<meta name="twitter:description" content=""/>

</head>

<body class="list" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="https://blog.alswl.com" accesskey="h" title="Log4D (Alt + H)">Log4D</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="https://blog.alswl.com/categories/" title="Categories">
                    <span>Categories</span>
                </a>
            </li>
            <li>
                <a href="https://blog.alswl.com/tags/" title="Tags">
                    <span>Tags</span>
                </a>
            </li>
            <li>
                <a href="https://blog.alswl.com/archives/" title="Archives">
                    <span>Archives</span>
                </a>
            </li>
            <li>
                <a href="https://blog.alswl.com/about/" title="About">
                    <span>About</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main"> 
<header class="page-header"><div class="breadcrumbs"><a href="https://blog.alswl.com">Home</a>&nbsp;»&nbsp;<a href="https://blog.alswl.com/categories/">Categories</a></div>
  <h1>
    coding
  </h1>
</header>

<article class="post-entry tag-entry"> 
  <header class="entry-header">
    <h2>Arch Linux下小红点中键
    </h2>
  </header>
  <div class="entry-content">
    <p>重要通知：Log4D的域名由 http://dddspace.com 迁移到 http://log4d.com 。 订阅地址现在改为 http://log4d.com/feed 和 http://feeds.feedburner.com/dddspace 。（FeedBurner的地址未发生变化） 请订阅我博客的朋友更新一下订阅地址。
关于Arch Arch是一款优秀的Linux发行版，使用它可以快速的学习Linux操作技巧。 Arch崇尚的原则是&#34;保持简单，且一目了然&#34;，这也是我崇尚的风格。
保持简单的同时也会给我带来一些小小的困扰，比如配置一下Thinkpad上面的小红帽 中键都需要设定Xorg。Arch直接向我们展示了Linux美妙的侗体，没有任何遮掩。
好在Arch有最完善的官方Wiki， Thinkpad爱好者也组建了一个专门的 ThinkWiki来为大家答疑解惑。 特别是官方Wiki，中文化做的非常好，是我见过最完善的中文linux wiki之一。
小红帽的中键 罗嗦完了，进入正题，我的环境是
arch(Linux version 3.1.0-4-ARCH) Gnome3.2.1 X.Org X Server 1.11.2 根据 How to configure the TrackPoint 描述，配置小红帽的中键有6种办法， 我使用的是xinput配置（这是推荐方法）。
运行下列代码，即可启用小红帽中键上下滑动。
xinput set-int-prop 12 &#34;Evdev Wheel Emulation&#34; 8 1 xinput set-int-prop 12 &#34;Evdev Wheel Emulation Button&#34; 8 2 xinput set-int-prop 12 &#34;Evdev Wheel Emulation Timeout&#34; 8 200 现在运行下面代码，启用左右滑动。
xinput set-int-prop 12 &#34;Evdev Wheel Emulation Axes&#34; 8 6 7 4 5 创建自动脚本，在系统启动时候自动执行...</p>
  </div>
  <footer class="entry-footer"><span title='2011-11-15 00:00:00 +0800 +0800'>2011-11-15</span>&nbsp;·&nbsp;alswl</footer>
  <a class="entry-link" aria-label="post link to Arch Linux下小红点中键" href="https://blog.alswl.com/2011/11/archlinux-thinkpad-trackpoint/"></a>
</article>

<article class="post-entry tag-entry"> 
  <header class="entry-header">
    <h2>jQuery.html()在IE下面错误解决办法
    </h2>
  </header>
  <div class="entry-content">
    <p>今天遇到一个jQuery的.html()设定错误问题，FF和Chrome下面都能够正常工作，而IE下面却失败。
检查之后，我把问题定性到jQuery.html(html)设定在IE下有问题。当设定html文本中含有空行、空格、Tab时候，会出现异常中断，导致html ()设定失败，但是又不会引发js错误。
狗日的IE！
下文是Google来的参考文章：使用 jQuery .html() 得到的string时, 在IE中出现错误的解决方法
使用 jQuery 的 .html() 函数( 使用 .text() 也类似 )得到元素内的值使用时，在IE6中出错，FireFox 中正常。
基本代码如下:
&lt;ul class=&#34;demo&#34;&gt; &lt;li&gt;easeInQuad&lt;/li&gt; &lt;li&gt;easeOutQuad&lt;/li&gt; &lt;li&gt;easeInOutQuad&lt;/li&gt; &lt;/ul&gt; $(&#39;.demo li&#39;).each(function(){ var action = $(this).html(); $(this).animate({&#39;height&#39;: &#39;-=50px&#39; }, 2000, action); }); debug时将 action 直接用字符串初始化:
//........... var action = &#39;easeInQuad&#39;; //........... 在IE6中正常执行。用 typeof 测 .html() 的值确实是 string。所以猜测是 .htlm() 在 IE6 中使用时会有一些不干净的东西。。。所以使用 $.trim() 函数来把它清洁一下，就可以解决这个问题:
//........... var action = $.trim( $(this).html() ); //........... 可是究竟是什么不干净的东西呢？还是因为别的原因？
jQuery 文档中关于 ....</p>
  </div>
  <footer class="entry-footer"><span title='2011-11-07 00:00:00 +0800 +0800'>2011-11-07</span>&nbsp;·&nbsp;alswl</footer>
  <a class="entry-link" aria-label="post link to jQuery.html()在IE下面错误解决办法" href="https://blog.alswl.com/2011/11/jquery-html-in-ie6/"></a>
</article>

<article class="post-entry tag-entry"> 
  <header class="entry-header">
    <h2>128M内存VPS LNMP安装优化小记
    </h2>
  </header>
  <div class="entry-content">
    <p>重要通知：Log4D 的域名由 http://dddspace.com 迁移到 http://log4d.com 。 订阅地址现在改为 http://log4d.com/feed 和 http://feeds.feedburner.com/dddspace 。（FeedBurner 的地址未发生变化）
这一次域名迁移的同时，我更换了服务器，由原先的虚拟空间迁移到独立 VPS。 现在使用的 VPS 是 PhotonVPS 。
月付5.95美元，使用优惠码 TENOFF 或 PHOTONLEB 可以打7折， 换算汇率之后是26人民币每月。
这款VPS的内存只有128,我们就要精打细算考虑如何省内存。经过我几天琢磨， 我终于配置的可用率比较高，使用 siege -c 100 -t 100 时候可以保持 100% 可用率。 （其实做不到这么高的并发，大概10个并发每秒）下面就是我记录的安装配置过程。
安装 LNMP Linux 发行版选用 CentOS 据说有较好的安全性和性能，我个人更喜欢 Arch。查询了相关资料， 在生产环境使用 Arch 的似乎不多。
CentOS 里面的包比较旧，不像 Arch 里面，滚动最新。 所以这里需要用到的LNMP大部分都需要自行编译。
Nginx 安装 Nginx 的性能在小内存低配置的服务器上跑得比 Apache 要好。这是我们为什么选用 Nginx。
目前 Nginx 的最新稳定版是1.0.9版。CentOS 官方源里面搜索不到 Nginx，需要自行编译。
准备编译环境，需要安装一堆工具，使用下面这个命令 yum 安装。
yum -y install gcc gcc-c&#43;&#43; autoconf libjpeg libjpeg-devel libpng libpng-devel freetype freetype-devel libxml2 libxml2-devel zlib zlib-devel glibc glibc-devel glib2 glib2-devel bzip2 bzip2-devel ncurses ncurses-devel curl curl-devel e2fsprogs e2fsprogs-devel krb5 krb5-devel libidn libidn-devel openssl openssl-devel openldap openldap-devel nss_ldap openldap-clients openldap-servers 下载Nginx...</p>
  </div>
  <footer class="entry-footer"><span title='2011-11-06 00:00:00 +0800 +0800'>2011-11-06</span>&nbsp;·&nbsp;alswl</footer>
  <a class="entry-link" aria-label="post link to 128M内存VPS LNMP安装优化小记" href="https://blog.alswl.com/2011/11/vps-lnmp-setup-config/"></a>
</article>

<article class="post-entry tag-entry"> 
  <header class="entry-header">
    <h2>jEmotion
    </h2>
  </header>
  <div class="entry-content">
    <p>重要通知：Log4D的域名由 http://dddspace.com 迁移到 http://log4d.com 。 订阅地址现在改为 http://log4d.com/feed 和 http://feeds.feedburner.com/dddspace 。（FeedBurner的地址未发生变化）
白天工作时候需要一个功能，我搜了一下Google，没有找到合适的，就花了半天时间写了一个jQuery插件jEmotion。
jEmotion的主要功能是用来给输入框加入转义之后的表情代码，然后在页面显示时候可以重新将表情代码转回表情图片。
{# https://medium.com/@ardianta/writing-using-typora-on-hugo-based-blog-a1be8500774a #} jEmotion的代码托管在GitHub上，地址是 https://github.com/alswl/jEmotion 。
demo地址是 [http://lab.log4d.com/javascript/jEmotion/demo.html](http://lab.log4d. com/javascript/jEmotion/demo.html) 。
这是我写的第一个jQuery插件，写完还蛮兴奋的，哈哈。</p>
  </div>
  <footer class="entry-footer"><span title='2011-11-04 00:00:00 +0800 +0800'>2011-11-04</span>&nbsp;·&nbsp;alswl</footer>
  <a class="entry-link" aria-label="post link to jEmotion" href="https://blog.alswl.com/2011/11/jemotion/"></a>
</article>

<article class="post-entry tag-entry"> 
  <header class="entry-header">
    <h2>域名迁移
    </h2>
  </header>
  <div class="entry-content">
    <p>各位好，我将在一个星期之内完成dddspace.com到log4d.com域名的迁移。
Log4D的域名最早叫dddspace.cn，创建于2009年5月14日，再之后09年12月份某次cn域名爆发群体性拔线之后，我注册了dddspace.co m这个域名。
不知不觉Log4D博客已经走过了2个多年头，我也终于在守候1年多时间里面抢到了名正言顺的log4d.com域名。同时我在PhotonVPS购买了一个XEN VPS，128M内存，300G流量，我用来运行这个博客，同时配置了VPN用作它用，你们懂的。
顺便给PhotonVPS做个广告，我那款VPS每个月4.95美元，然后用优惠码打7折，差不多26块钱一个月。我之前使用的虚拟主机&#43;VPN每个月也是26块钱， 何乐而不为呢。PhotonVPS速度还凑合（有些线路可能比较慢，江苏电信/江苏联通速度不错），128M内存小了一点，需要优化一下才能跑的很顺畅。有兴趣的可以 压力测试一下我的Log4D。
Log4D的主题也在紧锣密鼓的重写中，我现在使用Toolbox 1.3版本作为模板来写主题，新主题的源码在 https://github.com/alswl/simpletoolbox 。
log4d.com现在已经可以访问，由于主题的不完善，看上去还比较粗糙。不过评论回复什么的我已经配置好了，现在用的是WordPress 3.x原生嵌套评论。
最后，我之前用三个订阅地址：dddspace.com/feed原始订阅地址;FeedBurner地址;FeedSky地址;现在厚着脸皮请大家将订阅地址改为F eedBurner地址，http://feeds.feedburner.com/dddspace 或者 http://log4d.com/feed。
以后就用这个域名了，再也不想换了～</p>
  </div>
  <footer class="entry-footer"><span title='2011-11-02 00:00:00 +0800 +0800'>2011-11-02</span>&nbsp;·&nbsp;alswl</footer>
  <a class="entry-link" aria-label="post link to 域名迁移" href="https://blog.alswl.com/2011/11/to-log4d/"></a>
</article>

<article class="post-entry tag-entry"> 
  <header class="entry-header">
    <h2>新logo
    </h2>
  </header>
  <div class="entry-content">
    <p>策划了一年的博客改版终于跨出了第一步—-新Logo。
{# https://medium.com/@ardianta/writing-using-typora-on-hugo-based-blog-a1be8500774a #} 有木有觉得帅气无比啊，这是用gimp做的，非PS出品。
ps：此乃山寨之作～</p>
  </div>
  <footer class="entry-footer"><span title='2011-09-29 00:00:00 +0800 +0800'>2011-09-29</span>&nbsp;·&nbsp;alswl</footer>
  <a class="entry-link" aria-label="post link to 新logo" href="https://blog.alswl.com/2011/09/new-logo/"></a>
</article>

<article class="post-entry tag-entry"> 
  <header class="entry-header">
    <h2>使用unison同步文件
    </h2>
  </header>
  <div class="entry-content">
    <p>1. 同步控 我是一个同步控，会妄想自己的文件遭遇不可修复性的毁灭， 因此经常丧心病狂的做备份。 比如每每备份到移动硬盘中， 比如每年一次的刻盘备份，又比如我现在要介绍的同步软件unison。
据我自己考察，这种对备份文件丢失的恐惧来自于小时候一次意外格式化F盘， 从而导致我搜集的所有《龙珠》漫画丢失而产生的。
另一个同步文件的需求来自于我的两台电脑：常驻家中的DELL 6400，是我的大房； 最近得宠的小蜜Thinkpad X201。其中6400是Win7系统， 而X200是Arch Linux主打的双系统，我希望两者的文件保持同步， 便于我两边使用时候都能检索资料。如何实现跨平台同步方案让我头疼了好久， 幸好有unison拯救了我。
2. 同步历史 很久很久以前，那时候我还喝三鹿，我开始用TotalCmd来做同步文件， 依稀记得那个功能是在 命令 里面的 比较文件夹 。 这个功能满足我当时简单粗糙的需求。只要把需要同步的文件夹分列TotalCmd两侧， 然后就可以通过命令自动查找相异的文件。
当时在我看来，尤其神奇的是文件过滤功能和按照 日期 、 文件内容 比较功能。 着实帮了我很大忙。
再过了几年，TotalCmd不能满足我了，我不想每次都选择需要同步的文件， 再用肉眼比对，同步功能也偏少。我搜寻到一款老牌的同步工具， 叫做GoodSync，这是一款商业软件，可以试用30天， 作为专业的同步软件，这个GoodSync的确是蛮适用：支持大小写屏蔽、 文件过滤等等。
GoodSync还可以支持网络映射硬盘，再通过Samba等协议支持，可以实现跨平台同步。 可惜GoodSync要收费，而且通过网络映射的方式也不慎完美，所以最后也弃用了。
3. unison 终于轮到unison闪亮登场了。 unison解决了跨平台同步，文件过滤，断点续接，大小写同步等等各种问题。
官方介绍：
Unison is a file-synchronization tool for Unix and Windows. It allows two replicas of a collection of files and directories to be stored on different hosts (or different disks on the same host), modified separately, and then brought up to date by propagating the changes in each replica to the other....</p>
  </div>
  <footer class="entry-footer"><span title='2011-09-27 00:00:00 +0800 +0800'>2011-09-27</span>&nbsp;·&nbsp;alswl</footer>
  <a class="entry-link" aria-label="post link to 使用unison同步文件" href="https://blog.alswl.com/2011/09/unison/"></a>
</article>

<article class="post-entry tag-entry"> 
  <header class="entry-header">
    <h2>网页渐进式载入图片
    </h2>
  </header>
  <div class="entry-content">
    <p>Question 为什么有的网页打开图片是从上到下逐行打开，有的则是先显示低分辨率图片再逐渐加入细节？
Answer 感谢@吴亚桐 回答给我找到线索，感谢提问者的好问题，我为这个问题曾经困惑了多年。这种渐进式载入方法容易和其他渐进式载入混淆。
我这里小总结一下几种渐进式载入办法。
js 延迟载入，当浏览器滚动条拉到下面时候才显示出图片，参考 http://www.neoease.com/lazy-load-jquery-plugin-delay-load-image/ 使用两张一大一小照片，小的先显示，等大图片完全下载好之后再载入。参考 http://blog.rexsong.com/?p=929 图片渐进式技术，也就是本问题。 大图片切割成小图片，逐个载入，这是互联网早期方式，现在已经几乎看不到了。 太浪费http连接了。 下面是答案：
浏览器下载图片的时候渐进式载入，这样下载完一张图可以看到它的样子， 只不过只是不清楚的图，这样可以减少你等待看它的时间。
实际上有两种方式可以实现这种渐进式效果，一种是图像隔行扫描（Interlace）， 中文可以成为交错，另外一种叫做图像渐进式扫描（Progressive）。
隔行扫描可以在gif/png中实现。隔行GIF是指图像文件是按照隔行的方式来显示的， 比如先出奇数行，再出偶数行，造成图像是逐渐变清楚的。将图像文件保存成隔行 GIF 格式的方法是，在 Photoshop中进行保存时，选择&#34;Interlaced&#34; （不要选择&#34;Normal&#34;），在Paint Shop Pro中进行保存时，点击&#34;Option…“按钮， 选择&#34;Interlaced”（不要选择&#34;Non Interlaced&#34;）。 渐进式扫描在在jpg中实现。逐级JPG文件可以让图像先以比较模糊的形式显示， 随着图像文件数据不断从网上传过来，图像会逐渐变清晰。 这样做的好处是图像可以尽快地显示出来，虽然图像不很完美， 但是却让浏览者看到了希望，并且图像在不断地变好。将图像文件保存成逐级 JPG格式的方法是，在Photoshop中进行保存时，选择&#34;Progressive&#34;，在 Paint Shop Pro 中进行保存时，点击&#34;Option…“按钮，选择&#34;Progressive encoding”。 参考 http://blog.csdn.net/greenerycn/article/details/1458231 http://www.libpng.org/pub/png/pngintro.html </p>
  </div>
  <footer class="entry-footer"><span title='2011-09-23 00:00:00 +0800 +0800'>2011-09-23</span>&nbsp;·&nbsp;alswl</footer>
  <a class="entry-link" aria-label="post link to 网页渐进式载入图片" href="https://blog.alswl.com/2011/09/interlace-progressive-image/"></a>
</article>

<article class="post-entry tag-entry"> 
  <header class="entry-header">
    <h2>使用nose做测试
    </h2>
  </header>
  <div class="entry-content">
    <p>不做单元测试的程序员不是好程序员。最近我在Pylons下面做开发， 使用 nose 做单元测试，颇有心得， 在这里分享一下。
1. Pylons中依赖包 先简单介绍一下Pylons, Pylons与其说是一个框架，不如说是一堆框架的组合， Pylons在其中做到一个胶水的作用。Pylons依赖的包如下。
breaker，缓存和Session FormEncode，用户输入检查 Mako，模板渲染 nose，自动化测试 Paste，服务器 Routes, 路由 Tempita，Paste的模板 Weberror WebOb，提供WSGI请求响应等对象 WebTest，Paste自带的测试小框架， 提供TestResponse和TestRequest两个有用的小东西 Pylons的测试主要使用的其中的 Paste / nose / WebOb / WebTest。 遇到问题的时候，可以去翻一翻上面的文档。
2. Pylons中测试目录结构 目录结构如下
├─config ├─controllers ├─lib ├─model ├─public ├─templates └─tests └─functional 目录中的 config / controllers / lib / model / public 在不同的web框架下面可能会略有差别，在这里我不关注他们，我关注 tests / functional 中存放相应的测试脚本，比如 test_user.py
3. 第一个简单的测试用例 3.1. 撰写单元测试文件 最简单的test脚本如下
from myb.tests import * class TestIndexController(TestController): def test_index(self): pass # Test response....</p>
  </div>
  <footer class="entry-footer"><span title='2011-09-22 00:00:00 +0800 +0800'>2011-09-22</span>&nbsp;·&nbsp;alswl</footer>
  <a class="entry-link" aria-label="post link to 使用nose做测试" href="https://blog.alswl.com/2011/09/nose/"></a>
</article>

<article class="post-entry tag-entry"> 
  <header class="entry-header">
    <h2>使用pptpclient连接vpn网络[译文]
    </h2>
  </header>
  <div class="entry-content">
    <p>最近在ddwrt配置vpn，参考了arch的pptpclient配置文档[Microsoft VPN client setup with pptpclien t](https://wiki.archlinux.org/index.php/Microsoft_VPN_client_setup_with_pptpcl ient)，同时顺便花了一点时间翻译成中文，正文如下（使用wiky.js转换pe diawiki到html，原文会有更多的wiki模板样式便于查看，有问题请参照原文）。
pptpclient是一个实现Microsoft PPTP协议的程序。因此它能够被用来接入另一个Microsoft VPN网络，比如学校和单位。
安装PPTPClient pptpclient由安装包pptpclient提供，运行下列命令可以安装：
pacman -S pptpclient 配置 你需要从网络管理员获取以下信息来配置pptpclient:
VPN服务器的ip或者域名 VPN隧道名称 Windows域（不是所有网络都需要） VPN用户名 VPN密码 编辑配置文件 用你称手的编辑器打开/etc/ppp/options.pptp。这个文件为你的VPN连接启用了一系列默认安全设置。如果你连接时候出现问题，你可以自定义配置。 你的options.pptp文件最少需要包含以下内容：
lock noauth nobsdcomp nodeflate 编辑密码文件 下一步，打开或者创建/etc/ppp/chap- secrets。我们将在这个文件里面存储你的密码，记得修改权限让除root之外所有用户不能访问它。这个文件的格式如下：
&lt;DOMAIN&gt;\&lt;USERNAME&gt; PPTP &lt;PASSWORD&gt; * 如果你的服务器不要求域，则配置如下：
&lt;USERNAME&gt; PPTP &lt;PASSWORD&gt; * 替换掉上文中范例中的占位符。注意，如果你的密码包含特殊字符，比如&#34;$&#34;，你需要用双引号把它们包起来。
命名你的VPN隧道 用你称手的编辑器创建类似/etc/ppp/peers/的文件，把这里替换成你的VPN连接名。这个文件设置之后看起来如下：
pty &#34;pptp &lt;SERVER&gt; --nolaunchpppd&#34; name &lt;DOMAIN&gt;\&lt;USERNAME&gt; remotename PPTP require-mppe-128 file /etc/ppp/options.pptp ipparam &lt;TUNNEL&gt; {{Note|跟刚才一样，如果你的连接不要求域，忽略范例中的&#34;&#34;}} {{Note|PPTP远程主机使用Chap-Secrets文件中的}}
是VPN服务器的地址，是你所属的域，是你将要用来连接服务器的用户名，是连接的名称。
{{Note|如果你不需要使用MPPE，你应当从/etc/ppp/options.pptp中移除require-mppe-128这个选项}}
创建你的连接
用root执行以下命令来确保配置是正确的： # pon $TUNNEL debug dump logfd 2 nodetach 如果一切都配置好了，pon命令应当不会自动结束。一旦你感觉差不多OK了，就可以终止这个命令。 {{Note|另一个用来确保配置正确的命令是ifconfig -a，看看里面时候有一个名叫ppp0的新驱动，并且还是可用的}} 执行以下命令来连接VPN隧道： # pon 是你之前命名过的VPN隧道名称。注意使用root命令执行。...</p>
  </div>
  <footer class="entry-footer"><span title='2011-09-04 00:00:00 +0800 +0800'>2011-09-04</span>&nbsp;·&nbsp;alswl</footer>
  <a class="entry-link" aria-label="post link to 使用pptpclient连接vpn网络[译文]" href="https://blog.alswl.com/2011/09/pptpclient/"></a>
</article>
<footer class="page-footer">
  <nav class="pagination">
    <a class="prev" href="https://blog.alswl.com/categories/coding/page/5/">
      «&nbsp;Prev&nbsp;
    </a>
    <a class="next" href="https://blog.alswl.com/categories/coding/page/7/">Next&nbsp;&nbsp;»
    </a>
  </nav>
</footer>
    </main>
    
<footer class="footer">
    <span>&copy; 2022 <a href="https://blog.alswl.com">Log4D</a></span>
    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
</body>

</html>
