<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:content="http://purl.org/rss/1.0/modules/content/">
  <channel>
    <title>sre on Log4D</title>
    <link>https://blog.alswl.com/categories/sre/</link>
    <description>Recent content in sre on Log4D</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>en-us</language>
    <lastBuildDate>Fri, 11 Jun 2021 17:53:00 +0800</lastBuildDate><atom:link href="https://blog.alswl.com/categories/sre/atom.xml" rel="self" type="application/rss+xml" />
    <item>
      <title>如何做好 PRR（Production Rediness Review）？</title>
      <link>https://blog.alswl.com/2021/06/prr/</link>
      <pubDate>Fri, 11 Jun 2021 17:53:00 +0800</pubDate>
      
      <guid>https://blog.alswl.com/2021/06/prr/</guid>
      <description>image from pixabay.com
SRE 工程师往往会负责一个具体组件，有时也称为服务或系统（下文都称之为组件）。
需要关注的有这个组件生命周期各类事项：运行状态、日常迭代、变更计划，以及在大促等活动中的筹备、预案等等，
有些组件是团队已经在长期持续维护着的，而有些则是要去新接入。
那么，当 SRE 接手（on-borading）这样组件时， 需要做哪些事项呢，
如何将「接手」这个行为做得有掌控力、顺畅且体面？
了解组件现状 第一步永远是了解现状，孙子兵法谋攻篇说，知己知彼，百战不殆。
现状包含组件的当前运行状态、环境，
还包含当前 SRE 团队的能力、平台是否可以顺利衔接。
了解一个组件，可以先以用户角度进行切入。
去理解这个组件提供什么功能，服务对象是谁，服务的规模如何？
能否将组件进行归类？是属于普通业务系统，还是基础设施？
如果时间充裕的话，还可以跟这个组件的用户进行几次沟通，咨询，他们关于这个组件使用上的痛点。
近期和长期的规划也是需要重点关注的内容。
在组件设计和规划上面有没有什么计划和目标。根据规划我们可以推断出该组件处于何种生命周期。
生命早期的组件要多关注变更和基础能力建设；
成熟期组件往往承担了较为重要的角色，很可能承担了相当的生产流量，这时候变更、可观测性和应急方面就要花更多精力。
生命周期末期的组件则关注点是在维稳，优先考虑如何找到人，并且尽量低成本复用现有能力平台，甚至还要适当关注服务迁移和下线计划。
第二步是以技术的视角来切入，
分别从架构、依赖、部署、可伸缩能力、容量等角度切入，具体需要回答的问题如下：
架构和组件依赖：系统架构设计，功能特性图，模块切分图，核心场景的数据链路图，核心模型图；存储视角的模型图；
历史上架构是否发生变化，驱动变化的原因是什么，有哪些决策变量，这些决策变量未来是否还会继续变化？ 部署结构：物理部署图，有没有考虑异地机房问题？上下游依赖，哪些是强依赖和弱依赖 Scalable：组件是否是无状态的，是否具备水平扩容能力？如果是有状态的，状态管理基于什么存储系统？流量峰值如何应对？ 容量：当前吞吐水平如何；是否具备大流量下限流能力；流量峰值来时，是否有足够资源扩容；是否具备限流、降级能力？ 结合 SRE 团队服务的其他组件，还要思考一下有哪些其他组件和当前组件类型一样，有什么差异点？
有没有特殊的部署要求？
对一个组件需要了解到什么程度才能接手？ 这里我用几种程度来描述掌控力：
L1 具备作为普通用户的使用能力，应急时能够定位出问题方向，找到合适的人。 L2 具备资深用户能力，有一定调优能力（Tuning）能力。 L3 具备处置问题（Trouble Shooting）能力。 L4 具备架构设计能力和前瞻性，能够给 SWE 反哺输入 在经过一轮 PRR 完整流程之后，SRE 应当至少需要具备 L2 级别能力。
接管一段时间之后，随着对组件不断的了解，SRE 应当具备 L3 级别能力。
明确日常和应急事项 了解现状这个动作基本上是以静态的视角来看待组件。
完成之后，还要换成动态视角来看：有哪些日常操作（Operational）和紧急状态（Emergency）的操作？
需要关注的领域有可观测性、变更、应急预案：
可观测性：当前监控系统是否具备 Metrics、Tracing、Logging 三类观测机制接入？是否具备中心化监控能力？ 告警：接入哪些告警系统？是否拎出了核心 SLI（跌零因子、核心指标），是否具备基于 SLO 进行错误预算控制的能力？</description>
    </item>
    
  </channel>
</rss>
