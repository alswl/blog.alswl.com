<!DOCTYPE html><html lang=en> <head><title>铁血联盟EdtTxt转换器v0.9 - Log4D</title><!-- Using the latest rendering mode for IE --><meta http-equiv=X-UA-Compatible content="IE=edge"><meta charset=utf-8><meta name=viewport content="width=device-width, initial-scale=1.0"><meta http-equiv=Content-Security-Policy content=block-all-mixed-content><link rel="shortcut icon" href=/favicon.ico type=image/x-icon><link href=https://blog.alswl.com/2009/11/jagged-alliance-edt-txt-converter-v0-9/ rel=canonical><meta name=author content=alswl><meta name=keywords content=Python><meta name=description content="上个月时候，zwwooooo同鞋联系我让帮写一个铁血联盟中需要用到的Edt<->Txt转换器，我前前后后大约三个星期完成 到v0.9，能完成基本的功能（但似乎存在一些未知Bug，-_-#）。由于我之后很长一段时间得找工作，所以不能继续维护这个小工具，现在把他的代码开放，如果有高 人能看到这个小工具，有兴趣的话可以继续维护下去，(zwwooooo，真的很不好意思……)。 一些关于程序说明，zwwooooo原文，更详细可以联系zwwooooo本人： edt（后缀） 是游戏对话文件，游戏里有很多种，但都是有规律的，我把一些规律和流程说一下 一、从 edt 提取出对话部分文本，然后转换并输出为 ansi 码文本，用附件的 000.edt 为例说明 把 000.edt 文件用16进制方式打开，对话从“0”处开始，结束标志是2个16进制字节：00 00 000.edt …"><!-- Bootstrap --><link rel=stylesheet href=https://cdn.staticfile.org/twitter-bootstrap/3.1.0/css/bootstrap.min.css type=text/css><link href=https://cdn.staticfile.org/font-awesome/4.1.0/css/font-awesome.min.css rel=stylesheet><link href=https://blog.alswl.com/theme/css/pygments/native.css rel=stylesheet><link rel=stylesheet href=https://blog.alswl.com/theme/css/style.css type=text/css><link href=https://blog.alswl.com/atom.xml type=application/atom+xml rel=alternate title="Log4D Atom Feed"><link href=https://blog.alswl.com/rss.xml type=application/rss+xml rel=alternate title="Log4D RSS Feed"></head> <body> <div class="navbar navbar-default" role=navigation> <div class="container  col-lg-8 col-lg-offset-2"> <div class=navbar-header> <button type=button class=navbar-toggle data-toggle=collapse data-target=.navbar-ex1-collapse> <span class=sr-only>Toggle navigation</span> <span class=icon-bar></span> <span class=icon-bar></span> <span class=icon-bar></span> </button> <a href=https://blog.alswl.com/ class=navbar-brand> Log4D </a> </div> <div class="collapse navbar-collapse navbar-ex1-collapse"> <ul class="nav navbar-nav"> <li><a href=/tags/ >Tags</a></li> <li><a href=/links/ >Links</a></li> <li><a href=/about/ >About</a></li> </ul> <ul class="nav navbar-nav navbar-right"> <li><a href=https://blog.alswl.com/archives/ ><i class="fa fa-th-list"></i><span class=icon-label>Archives</span></a></li> </ul> </div> <!-- /.navbar-collapse --> </div> </div> <!-- /.navbar --> <div class=container> <div class=row> <div class="col-lg-8 col-lg-offset-2"> <section id=content> <article class=article-detail> <header class=page-header> <h1 class=title> <a href=https://blog.alswl.com/2009/11/jagged-alliance-edt-txt-converter-v0-9/ rel=bookmark title="Permalink to 铁血联盟EdtTxt转换器v0.9"> 铁血联盟EdtTxt转换器v0.9 </a> </h1> </header> <div class=entry-content> <div class=panel> <div class=panel-body> <footer class=post-info> <span class="label label-default">Date</span> <span class=published> <i class="fa fa-calendar"></i><time datetime=2009-11-01T00:00:00+08:00> 2009-11-01</time> </span> <span class="label label-default">Tags</span> <a href=https://blog.alswl.com/tag/python/ >Python</a> </footer><!-- /.post-info --> </div> </div> <p>上个月时候，<a href=http://zww.me/ >zwwooooo</a>同鞋联系我让帮写一个铁血联盟中需要用到的Edt&lt;-&gt;Txt转换器，我前前后后大约三个星期完成 到v0.9，能完成基本的功能（但似乎存在一些未知Bug，-_-#）。由于我之后很长一段时间得找工作，所以不能继续维护这个小工具，现在把他的代码开放，如果有高 人能看到这个小工具，有兴趣的话可以继续维护下去，(zwwooooo，真的很不好意思&hellip;&hellip;)。 一些关于程序说明，zwwooooo原文，更详细可以联系zwwooooo本人：</p> <blockquote> <p>edt（后缀） 是游戏对话文件，游戏里有很多种，但都是有规律的，我把一些规律和流程说一下</p> </blockquote> <p>一、从 edt 提取出对话部分文本，然后转换并输出为 ansi 码文本，用附件的 000.edt 为例说明</p> <ol type=1> <li><p>把 000.edt 文件用16进制方式打开，对话从&ldquo;0&rdquo;处开始，结束标志是2个16进制字节：00 00</p></li> <li><p>000.edt 里面每个/每段对话/说明相隔 640 个字节，即&ldquo;0&rdquo;开始为第一段，直到16进制双字节出现&ldquo;00 00&rdquo;结束，然后第2段话在第 640 字节处开始，也是以&ldquo;00 00&rdquo;表示结束，后面的以此类推。 （因为有几种edt文件，每种edt文件的对话间隔不同，所以这个&ldquo;间隔&rdquo;最好设个参数，可以在转换前自定义输入。）</p></li> <li><p>然后把提取出的16进制数全部按UTF-16的双字节（或者转为对应的十进制） -1 处理，如：0~1字节处的双字节值为02 1E（1E为高位，02为地位 &mdash;-哈哈，这个我好想说多余了），那么进行 -1 处理后得到：01 1E。然后把所有 -1 处理好的数据转换为 ansi 码（注：不转也可以 ，直接用UTF-16无bom格式做文本文件&mdash;-不过这样不太方便编辑），那么文本就出来了</p></li> </ol> <p>每段话提取并转换后按 000.txt 一样显示，方便修改</p> <ol start=4 type=1> <li>对话中的一些特殊字符说明（都是双字节16进制），有些提取转换时需要特殊处理的（不能直接 -1 处理）：</li> </ol> <p>1）就是刚才说的&ldquo;00 00&rdquo;，它是每个对话的结束标志。</p> <p>2）&ldquo;20 00&rdquo;：UTF-16编码&rsquo;空格&rsquo;的编码，这个是保持不变的，不用 -1 处理。</p> <p>3）&ldquo;B3 00&rdquo; 和 &ldquo;B4 00&rdquo;：这两个是游戏专用的特殊控制符，用来控制文本高亮和居中，这个也要 -1 处理，-1 处理后为：B2 00 和 B3 00，但因为ansi码里面没有这个字符，所以要用ansi码里面的2个不常用的字符表示，例如&ldquo;㈡&rdquo; &ldquo;㈢&rdquo;。</p> <p>这样就能修改对话了/提取出的英文翻译成中文。</p> <p>二、把 txt 转换回 edt（直接修改原 edt 文件或者新建一个edt文件，对话部分以外部分用&ldquo;00 00&rdquo;填充），当然最好两个方式都行</p> <p>在v0.9中，我已经可以在程序中对参数进行配置，对系统的blockSize和标识符进行修改。一个已知缺陷是在Edt-&gt;Txt的处理行数时候可能出现问题。</p> <p>程序是<a href=http://log4d.com/2009/10/python-django-mtv-framework-and-php-mvc-framework>用Python写的</a>，不要觉得很难，我也是在用Python完成Hello World之后第三天开始写这个程序，只要有C/Java/C#这些语言一些基础，就可以理解这些程序了。</p> <pre><code># coding=utf-8
import struct
import os
import ConfigParser</code></pre> <p>configParser=ConfigParser.ConfigParser()</p> <p>CONFIGNAME = &lsquo;config.cfg&rsquo;</p> <p>blockSize = 640 #size per block 640/480</p> <p>isDebug = False #isDebug mode True/False</p> <p>sysEnd = &lsquo;x00x00&rsquo; #end of a sentence, e.g.&nbsp;a space x00x00</p> <p>startPosition = 00 #start posion</p> <p>PASS_SYMBOL = &lsquo;x20x00&rsquo; #the list of word not decode</p> <p>SPECIAL_1 = &lsquo;xB3x00&rsquo; #the word of B300</p> <p>SPECIAL_2 = &lsquo;xB4x00&rsquo; #the word of B400</p> <p>sysEndList = {&lsquo;00&rsquo;: &lsquo;x00&rsquo;, &lsquo;01&rsquo;: &lsquo;x01&rsquo;, &lsquo;02&rsquo;: &lsquo;x02&rsquo;, &lsquo;03&rsquo;: &lsquo;x03&rsquo;, &lsquo;04&rsquo;: &lsquo;x04&rsquo;, &lsquo;05&rsquo;: &lsquo;x05&rsquo;, &lsquo;06&rsquo;: &lsquo;x06&rsquo;, &lsquo;07&rsquo;: &lsquo;x07&rsquo;, &lsquo;08&rsquo;: &lsquo;x08&rsquo;, &lsquo;09&rsquo;: &lsquo;x09&rsquo;, &lsquo;0a&rsquo;: &lsquo;x0a&rsquo;, &lsquo;0b&rsquo;: &lsquo;x0b&rsquo;, &lsquo;0c&rsquo;: &lsquo;x0c&rsquo;, &lsquo;0d&rsquo;: &lsquo;x0d&rsquo;, &lsquo;0e&rsquo;: &lsquo;x0e&rsquo;, &lsquo;0f&rsquo;: &lsquo;x0f&rsquo;, &lsquo;10&rsquo;: &lsquo;x10&rsquo;, &lsquo;11&rsquo;: &lsquo;x11&rsquo;, &lsquo;12&rsquo;: &lsquo;x12&rsquo;, &lsquo;13&rsquo;: &lsquo;x13&rsquo;, &lsquo;14&rsquo;: &lsquo;x14&rsquo;, &lsquo;15&rsquo;: &lsquo;x15&rsquo;, &lsquo;16&rsquo;: &lsquo;x16&rsquo;, &lsquo;17&rsquo;: &lsquo;x17&rsquo;, &lsquo;18&rsquo;: &lsquo;x18&rsquo;, &lsquo;19&rsquo;: &lsquo;x19&rsquo;, &lsquo;1a&rsquo;: &lsquo;x1a&rsquo;, &lsquo;1b&rsquo;: &lsquo;x1b&rsquo;, &lsquo;1c&rsquo;: &lsquo;x1c&rsquo;, &lsquo;1d&rsquo;: &lsquo;x1d&rsquo;, &lsquo;1e&rsquo;: &lsquo;x1e&rsquo;, &lsquo;1f&rsquo;: &lsquo;x1f&rsquo;, &lsquo;20&rsquo;: &lsquo;x20&rsquo;, &lsquo;21&rsquo;: &lsquo;x21&rsquo;, &lsquo;22&rsquo;: &lsquo;x22&rsquo;, &lsquo;23&rsquo;: &lsquo;x23&rsquo;, &lsquo;24&rsquo;: &lsquo;x24&rsquo;, &lsquo;25&rsquo;: &lsquo;x25&rsquo;, &lsquo;26&rsquo;: &lsquo;x26&rsquo;, &lsquo;27&rsquo;: &lsquo;x27&rsquo;, &lsquo;28&rsquo;: &lsquo;x28&rsquo;, &lsquo;29&rsquo;: &lsquo;x29&rsquo;, &lsquo;2a&rsquo;: &lsquo;x2a&rsquo;, &lsquo;2b&rsquo;: &lsquo;x2b&rsquo;, &lsquo;2c&rsquo;: &lsquo;x2c&rsquo;, &lsquo;2d&rsquo;: &lsquo;x2d&rsquo;, &lsquo;2e&rsquo;: &lsquo;x2e&rsquo;, &lsquo;2f&rsquo;: &lsquo;x2f&rsquo;, &lsquo;30&rsquo;: &lsquo;x30&rsquo;, &lsquo;31&rsquo;: &lsquo;x31&rsquo;, &lsquo;32&rsquo;: &lsquo;x32&rsquo;, &lsquo;33&rsquo;: &lsquo;x33&rsquo;, &lsquo;34&rsquo;: &lsquo;x34&rsquo;, &lsquo;35&rsquo;: &lsquo;x35&rsquo;, &lsquo;36&rsquo;: &lsquo;x36&rsquo;, &lsquo;37&rsquo;: &lsquo;x37&rsquo;, &lsquo;38&rsquo;: &lsquo;x38&rsquo;, &lsquo;39&rsquo;: &lsquo;x39&rsquo;, &lsquo;3a&rsquo;: &lsquo;x3a&rsquo;, &lsquo;3b&rsquo;: &lsquo;x3b&rsquo;, &lsquo;3c&rsquo;: &lsquo;x3c&rsquo;, &lsquo;3d&rsquo;: &lsquo;x3d&rsquo;, &lsquo;3e&rsquo;: &lsquo;x3e&rsquo;, &lsquo;3f&rsquo;: &lsquo;x3f&rsquo;, &lsquo;40&rsquo;: &lsquo;x40&rsquo;, &lsquo;41&rsquo;: &lsquo;x41&rsquo;, &lsquo;42&rsquo;: &lsquo;x42&rsquo;, &lsquo;43&rsquo;: &lsquo;x43&rsquo;, &lsquo;44&rsquo;: &lsquo;x44&rsquo;, &lsquo;45&rsquo;: &lsquo;x45&rsquo;, &lsquo;46&rsquo;: &lsquo;x46&rsquo;, &lsquo;47&rsquo;: &lsquo;x47&rsquo;, &lsquo;48&rsquo;: &lsquo;x48&rsquo;, &lsquo;49&rsquo;: &lsquo;x49&rsquo;, &lsquo;4a&rsquo;: &lsquo;x4a&rsquo;, &lsquo;4b&rsquo;: &lsquo;x4b&rsquo;, &lsquo;4c&rsquo;: &lsquo;x4c&rsquo;, &lsquo;4d&rsquo;: &lsquo;x4d&rsquo;, &lsquo;4e&rsquo;: &lsquo;x4e&rsquo;, &lsquo;4f&rsquo;: &lsquo;x4f&rsquo;, &lsquo;50&rsquo;: &lsquo;x50&rsquo;, &lsquo;51&rsquo;: &lsquo;x51&rsquo;, &lsquo;52&rsquo;: &lsquo;x52&rsquo;, &lsquo;53&rsquo;: &lsquo;x53&rsquo;, &lsquo;54&rsquo;: &lsquo;x54&rsquo;, &lsquo;55&rsquo;: &lsquo;x55&rsquo;, &lsquo;56&rsquo;: &lsquo;x56&rsquo;, &lsquo;57&rsquo;: &lsquo;x57&rsquo;, &lsquo;58&rsquo;: &lsquo;x58&rsquo;, &lsquo;59&rsquo;: &lsquo;x59&rsquo;, &lsquo;5a&rsquo;: &lsquo;x5a&rsquo;, &lsquo;5b&rsquo;: &lsquo;x5b&rsquo;, &lsquo;5c&rsquo;: &lsquo;x5c&rsquo;, &lsquo;5d&rsquo;: &lsquo;x5d&rsquo;, &lsquo;5e&rsquo;: &lsquo;x5e&rsquo;, &lsquo;5f&rsquo;: &lsquo;x5f&rsquo;, &lsquo;60&rsquo;: &lsquo;x60&rsquo;, &lsquo;61&rsquo;: &lsquo;x61&rsquo;, &lsquo;62&rsquo;: &lsquo;x62&rsquo;, &lsquo;63&rsquo;: &lsquo;x63&rsquo;, &lsquo;64&rsquo;: &lsquo;x64&rsquo;, &lsquo;65&rsquo;: &lsquo;x65&rsquo;, &lsquo;66&rsquo;: &lsquo;x66&rsquo;, &lsquo;67&rsquo;: &lsquo;x67&rsquo;, &lsquo;68&rsquo;: &lsquo;x68&rsquo;, &lsquo;69&rsquo;: &lsquo;x69&rsquo;, &lsquo;6a&rsquo;: &lsquo;x6a&rsquo;, &lsquo;6b&rsquo;: &lsquo;x6b&rsquo;, &lsquo;6c&rsquo;: &lsquo;x6c&rsquo;, &lsquo;6d&rsquo;: &lsquo;x6d&rsquo;, &lsquo;6e&rsquo;: &lsquo;x6e&rsquo;, &lsquo;6f&rsquo;: &lsquo;x6f&rsquo;, &lsquo;70&rsquo;: &lsquo;x70&rsquo;, &lsquo;71&rsquo;: &lsquo;x71&rsquo;, &lsquo;72&rsquo;: &lsquo;x72&rsquo;, &lsquo;73&rsquo;: &lsquo;x73&rsquo;, &lsquo;74&rsquo;: &lsquo;x74&rsquo;, &lsquo;75&rsquo;: &lsquo;x75&rsquo;, &lsquo;76&rsquo;: &lsquo;x76&rsquo;, &lsquo;77&rsquo;: &lsquo;x77&rsquo;, &lsquo;78&rsquo;: &lsquo;x78&rsquo;, &lsquo;79&rsquo;: &lsquo;x79&rsquo;, &lsquo;7a&rsquo;: &lsquo;x7a&rsquo;, &lsquo;7b&rsquo;: &lsquo;x7b&rsquo;, &lsquo;7c&rsquo;: &lsquo;x7c&rsquo;, &lsquo;7d&rsquo;: &lsquo;x7d&rsquo;, &lsquo;7e&rsquo;: &lsquo;x7e&rsquo;, &lsquo;7f&rsquo;: &lsquo;x7f&rsquo;, &lsquo;80&rsquo;: &lsquo;x80&rsquo;, &lsquo;81&rsquo;: &lsquo;x81&rsquo;, &lsquo;82&rsquo;: &lsquo;x82&rsquo;, &lsquo;83&rsquo;: &lsquo;x83&rsquo;, &lsquo;84&rsquo;: &lsquo;x84&rsquo;, &lsquo;85&rsquo;: &lsquo;x85&rsquo;, &lsquo;86&rsquo;: &lsquo;x86&rsquo;, &lsquo;87&rsquo;: &lsquo;x87&rsquo;, &lsquo;88&rsquo;: &lsquo;x88&rsquo;, &lsquo;89&rsquo;: &lsquo;x89&rsquo;, &lsquo;8a&rsquo;: &lsquo;x8a&rsquo;, &lsquo;8b&rsquo;: &lsquo;x8b&rsquo;, &lsquo;8c&rsquo;: &lsquo;x8c&rsquo;, &lsquo;8d&rsquo;: &lsquo;x8d&rsquo;, &lsquo;8e&rsquo;: &lsquo;x8e&rsquo;, &lsquo;8f&rsquo;: &lsquo;x8f&rsquo;, &lsquo;90&rsquo;: &lsquo;x90&rsquo;, &lsquo;91&rsquo;: &lsquo;x91&rsquo;, &lsquo;92&rsquo;: &lsquo;x92&rsquo;, &lsquo;93&rsquo;: &lsquo;x93&rsquo;, &lsquo;94&rsquo;: &lsquo;x94&rsquo;, &lsquo;95&rsquo;: &lsquo;x95&rsquo;, &lsquo;96&rsquo;: &lsquo;x96&rsquo;, &lsquo;97&rsquo;: &lsquo;x97&rsquo;, &lsquo;98&rsquo;: &lsquo;x98&rsquo;, &lsquo;99&rsquo;: &lsquo;x99&rsquo;, &lsquo;9a&rsquo;: &lsquo;x9a&rsquo;, &lsquo;9b&rsquo;: &lsquo;x9b&rsquo;, &lsquo;9c&rsquo;: &lsquo;x9c&rsquo;, &lsquo;9d&rsquo;: &lsquo;x9d&rsquo;, &lsquo;9e&rsquo;: &lsquo;x9e&rsquo;, &lsquo;9f&rsquo;: &lsquo;x9f&rsquo;, &lsquo;a0&rsquo;: &lsquo;xa0&rsquo;, &lsquo;a1&rsquo;: &lsquo;xa1&rsquo;, &lsquo;a2&rsquo;: &lsquo;xa2&rsquo;, &lsquo;a3&rsquo;: &lsquo;xa3&rsquo;, &lsquo;a4&rsquo;: &lsquo;xa4&rsquo;, &lsquo;a5&rsquo;: &lsquo;xa5&rsquo;, &lsquo;a6&rsquo;: &lsquo;xa6&rsquo;, &lsquo;a7&rsquo;: &lsquo;xa7&rsquo;, &lsquo;a8&rsquo;: &lsquo;xa8&rsquo;, &lsquo;a9&rsquo;: &lsquo;xa9&rsquo;, &lsquo;aa&rsquo;: &lsquo;xaa&rsquo;, &lsquo;ab&rsquo;: &lsquo;xab&rsquo;, &lsquo;ac&rsquo;: &lsquo;xac&rsquo;, &lsquo;ad&rsquo;: &lsquo;xad&rsquo;, &lsquo;ae&rsquo;: &lsquo;xae&rsquo;, &lsquo;af&rsquo;: &lsquo;xaf&rsquo;, &lsquo;b0&rsquo;: &lsquo;xb0&rsquo;, &lsquo;b1&rsquo;: &lsquo;xb1&rsquo;, &lsquo;b2&rsquo;: &lsquo;xb2&rsquo;, &lsquo;b3&rsquo;: &lsquo;xb3&rsquo;, &lsquo;b4&rsquo;: &lsquo;xb4&rsquo;, &lsquo;b5&rsquo;: &lsquo;xb5&rsquo;, &lsquo;b6&rsquo;: &lsquo;xb6&rsquo;, &lsquo;b7&rsquo;: &lsquo;xb7&rsquo;, &lsquo;b8&rsquo;: &lsquo;xb8&rsquo;, &lsquo;b9&rsquo;: &lsquo;xb9&rsquo;, &lsquo;ba&rsquo;: &lsquo;xba&rsquo;, &lsquo;bb&rsquo;: &lsquo;xbb&rsquo;, &lsquo;bc&rsquo;: &lsquo;xbc&rsquo;, &lsquo;bd&rsquo;: &lsquo;xbd&rsquo;, &lsquo;be&rsquo;: &lsquo;xbe&rsquo;, &lsquo;bf&rsquo;: &lsquo;xbf&rsquo;, &lsquo;c0&rsquo;: &lsquo;xc0&rsquo;, &lsquo;c1&rsquo;: &lsquo;xc1&rsquo;, &lsquo;c2&rsquo;: &lsquo;xc2&rsquo;, &lsquo;c3&rsquo;: &lsquo;xc3&rsquo;, &lsquo;c4&rsquo;: &lsquo;xc4&rsquo;, &lsquo;c5&rsquo;: &lsquo;xc5&rsquo;, &lsquo;c6&rsquo;: &lsquo;xc6&rsquo;, &lsquo;c7&rsquo;: &lsquo;xc7&rsquo;, &lsquo;c8&rsquo;: &lsquo;xc8&rsquo;, &lsquo;c9&rsquo;: &lsquo;xc9&rsquo;, &lsquo;ca&rsquo;: &lsquo;xca&rsquo;, &lsquo;cb&rsquo;: &lsquo;xcb&rsquo;, &lsquo;cc&rsquo;: &lsquo;xcc&rsquo;, &lsquo;cd&rsquo;: &lsquo;xcd&rsquo;, &lsquo;ce&rsquo;: &lsquo;xce&rsquo;, &lsquo;cf&rsquo;: &lsquo;xcf&rsquo;, &lsquo;d0&rsquo;: &lsquo;xd0&rsquo;, &lsquo;d1&rsquo;: &lsquo;xd1&rsquo;, &lsquo;d2&rsquo;: &lsquo;xd2&rsquo;, &lsquo;d3&rsquo;: &lsquo;xd3&rsquo;, &lsquo;d4&rsquo;: &lsquo;xd4&rsquo;, &lsquo;d5&rsquo;: &lsquo;xd5&rsquo;, &lsquo;d6&rsquo;: &lsquo;xd6&rsquo;, &lsquo;d7&rsquo;: &lsquo;xd7&rsquo;, &lsquo;d8&rsquo;: &lsquo;xd8&rsquo;, &lsquo;d9&rsquo;: &lsquo;xd9&rsquo;, &lsquo;da&rsquo;: &lsquo;xda&rsquo;, &lsquo;db&rsquo;: &lsquo;xdb&rsquo;, &lsquo;dc&rsquo;: &lsquo;xdc&rsquo;, &lsquo;dd&rsquo;: &lsquo;xdd&rsquo;, &lsquo;de&rsquo;: &lsquo;xde&rsquo;, &lsquo;df&rsquo;: &lsquo;xdf&rsquo;, &lsquo;e0&rsquo;: &lsquo;xe0&rsquo;, &lsquo;e1&rsquo;: &lsquo;xe1&rsquo;, &lsquo;e2&rsquo;: &lsquo;xe2&rsquo;, &lsquo;e3&rsquo;: &lsquo;xe3&rsquo;, &lsquo;e4&rsquo;: &lsquo;xe4&rsquo;, &lsquo;e5&rsquo;: &lsquo;xe5&rsquo;, &lsquo;e6&rsquo;: &lsquo;xe6&rsquo;, &lsquo;e7&rsquo;: &lsquo;xe7&rsquo;, &lsquo;e8&rsquo;: &lsquo;xe8&rsquo;, &lsquo;e9&rsquo;: &lsquo;xe9&rsquo;, &lsquo;ea&rsquo;: &lsquo;xea&rsquo;, &lsquo;eb&rsquo;: &lsquo;xeb&rsquo;, &lsquo;ec&rsquo;: &lsquo;xec&rsquo;, &lsquo;ed&rsquo;: &lsquo;xed&rsquo;, &lsquo;ee&rsquo;: &lsquo;xee&rsquo;, &lsquo;ef&rsquo;: &lsquo;xef&rsquo;, &lsquo;f0&rsquo;: &lsquo;xf0&rsquo;, &lsquo;f1&rsquo;: &lsquo;xf1&rsquo;, &lsquo;f2&rsquo;: &lsquo;xf2&rsquo;, &lsquo;f3&rsquo;: &lsquo;xf3&rsquo;, &lsquo;f4&rsquo;: &lsquo;xf4&rsquo;, &lsquo;f5&rsquo;: &lsquo;xf5&rsquo;, &lsquo;f6&rsquo;: &lsquo;xf6&rsquo;, &lsquo;f7&rsquo;: &lsquo;xf7&rsquo;, &lsquo;f8&rsquo;: &lsquo;xf8&rsquo;, &lsquo;f9&rsquo;: &lsquo;xf9&rsquo;, &lsquo;fa&rsquo;: &lsquo;xfa&rsquo;, &lsquo;fb&rsquo;: &lsquo;xfb&rsquo;, &lsquo;fc&rsquo;: &lsquo;xfc&rsquo;, &lsquo;fd&rsquo;: &lsquo;xfd&rsquo;, &lsquo;fe&rsquo;: &lsquo;xfe&rsquo;, &lsquo;ff&rsquo;: &lsquo;xff&rsquo;, }</p> <p>def welcome():</p> <p>print u&rsquo;*******************************************************************&rsquo;</p> <p>print u&rsquo;*************************** ***************************&rsquo;</p> <p>print u&rsquo;***************************EdtTxtConvert***************************&rsquo;</p> <p>print u&rsquo;*************************** ***************************&rsquo;</p> <p>print u&rsquo;*******************************************************************&rsquo;</p> <p>print u&rsquo;Any problem can connect me with my web site.&rsquo;</p> <p>print u&rsquo; <em>powered by alswl</em> &rsquo;</p> <p>print u&rsquo; <em>http://dddspace.cn</em>&rsquo;</p> <p>print u&rsquo; <em>09-10-01 v0.9</em> &rsquo;</p> <p>def getFiles(type):</p> <p>&lsquo;get the files of path&rsquo;</p> <p>global dirPath</p> <p>dirPath = raw_input(u&rsquo;Input the files path:&rsquo;)</p> <p>while not os.path.isdir(dirPath):</p> <p>print u&rsquo;%s is not a path&rsquo; %(dirPath)</p> <p>dirPath = raw_input(u&rsquo;Input the files path:&rsquo;)</p> <p>#os.chdir(dirPath)</p> <p>files = os.listdir(dirPath)</p> <p>fileList = list()</p> <p>for file in files:</p> <p>if os.path.splitext(file)[1].lower() == type:</p> <p>fileList.append(file)</p> <p>return fileList</p> <p>def myInit():</p> <p>&lsquo;init the argu&rsquo;</p> <p>try:</p> <p>global blockSize, isDebug, sysEnd, startPosition</p> <p>configParser.read(CONFIGNAME)</p> <p>blockSize = configParser.getint(&lsquo;edt_encode_config&rsquo;, &lsquo;block_size&rsquo;)</p> <p>isDebug = configParser.getboolean(&lsquo;edt_encode_config&rsquo;, &lsquo;debug&rsquo;)</p> <p>sysEnd = configParser.get(&lsquo;edt_encode_config&rsquo;, &lsquo;sys_end&rsquo;)</p> <p>startPosition = configParser.getint(&lsquo;edt_encode_config&rsquo;, &lsquo;start_position&rsquo;)</p> <p>viewConfig()</p> <p>except Exception, e:</p> <p>print u&rsquo;configure file %s error！Exiting！&rsquo; %CONFIGNAME</p> <p>raw_input(u&rsquo;Press Enter to exit&rsquo;)</p> <p>sys.exit()</p> <p>def viewConfig():</p> <p>print u&rsquo;Current configure:&rsquo;</p> <p>print u&rsquo;Block size:%s&rsquo; %blockSize</p> <p>print u&rsquo;Start Position:%s&rsquo; %startPosition</p> <p>print u&rsquo;Debug mode:%s&rsquo; %isDebug</p> <p>print u&rsquo;End Symbol:%s&rsquo; %toHex(sysEnd)</p> <p>def setConfig():</p> <p>global blockSize, isDebug, sysEnd, startPosition</p> <p>configParser.read(CONFIGNAME)</p> <p>try:</p> <p>blockSize = int(raw_input(&lsquo;set block size:&rsquo;))</p> <p>startPosition = int(raw_input(&lsquo;set start position:&rsquo;))</p> <p>isDebug = bool(raw_input(&lsquo;set is debug mode(empty is False):&rsquo;))</p> <p>sysEndInput = raw_input(&lsquo;set symbol of end(eg.0000)&rsquo;)</p> <p>sysEnd = sysEndList[sysEndInput[:2]] + sysEndList[sysEndInput[2:]]</p> <p>configParser.set(&lsquo;edt_encode_config&rsquo;, &lsquo;block_size&rsquo;, blockSize)</p> <p>configParser.set(&lsquo;edt_encode_config&rsquo;, &lsquo;debug&rsquo;, str(isDebug))</p> <p>configParser.set(&lsquo;edt_encode_config&rsquo;, &lsquo;sys_end&rsquo;, sysEnd)</p> <p>configParser.set(&lsquo;edt_encode_config&rsquo;, &lsquo;start_position&rsquo;, startPosition)</p> <p>with open(CONFIGNAME, &lsquo;wb&rsquo;) as configFile:</p> <p>configParser.write(configFile)</p> <p>except Exception, e:</p> <p>print &lsquo;Error set&rsquo;</p> <p>raw_input(&lsquo;Press Enter to continue&rsquo;)</p> <p>def toHex(s):</p> <p>&lsquo;format string to hex&rsquo;</p> <p>lst = []</p> <p>for ch in s:</p> <p>hv = hex(ord(ch)).replace(&lsquo;0x&rsquo;, &rsquo;&rsquo;)</p> <p>if len(hv) == 1:</p> <p>hv = &lsquo;0&rsquo;+hv</p> <p>lst.append(hv)</p> <p>return reduce(lambda x,y:x+y, lst)</p> <p>def getBlock(block640):</p> <p>&lsquo;get the useful string from block of 640 bytes&rsquo;</p> <p>for i in range(0, len(block640), 2):</p> <p>if block640[i : i+2] == sysEnd:</p> <p>return block640[:i]</p> <p>def decode(text):</p> <p>&lsquo;-1 operate&rsquo;</p> <p>list = &rsquo;&rsquo;</p> <p>for i in range(0, len(text), 2):</p> <p>try:</p> <p>rawStr = text[i: i+2]</p> <p>if rawStr == PASS_SYMBOL :</p> <p>list += rawStr</p> <p>elif rawStr == SPECIAL_1:</p> <p>list += &lsquo;x21x32&rsquo;</p> <p>elif rawStr == SPECIAL_2:</p> <p>list += &lsquo;x22x32&rsquo;</p> <p>else:</p> <p>a, b = struct.unpack(&lsquo;BB&rsquo;, rawStr)</p> <p>a -= 1</p> <p>list += struct.pack(&lsquo;BB&rsquo;, a, b)</p> <p>except Exception, e:</p> <p>tt = 0</p> <p>return list</p> <p>def encode(text):</p> <p>&lsquo;+1 operate&rsquo;</p> <p>list = &rsquo;&rsquo;</p> <p>for char in text:</p> <p>try:</p> <p>if char == &lsquo;x21x32&rsquo;:</p> <p>list += SPECIAL_1</p> <p>elif char == &lsquo;x22x32&rsquo;:</p> <p>list += SPECIAL_2</p> <p>else:</p> <p>a, b = struct.unpack(&lsquo;BB&rsquo;, char.encode(&lsquo;utf-16&rsquo;)[2:])</p> <p>a += 1</p> <p>list += struct.pack(&lsquo;BB&rsquo;, a, b)</p> <p>except Exception, e:</p> <p>tt = 0</p> <p>list += &lsquo;x00x00&rsquo;</p> <p>return list</p> <p>def read(file):</p> <p>&lsquo;read the block of file(use blockSize)&rsquo;</p> <p>return file.read(blockSize)</p> <p>def edtProcess(edtFile):</p> <p>&lsquo;edt-&gt;txt process&rsquo;</p> <p>fedt = open(dirPath + &lsquo;' + edtFile, &rsquo;rb&rsquo;)</p> <p>ftxt = open(dirPath + &lsquo;' + edtFile[0:-3] + &rsquo;txt&rsquo;, &lsquo;w&rsquo;)</p> <p>global i</p> <p>i = 0</p> <p>try:</p> <p>fedt.seek(startPosition)</p> <p>while True:</p> <p>block640 = read(fedt)</p> <p>if not block640:</p> <p>break</p> <p>if i == 640 and isDebug == True:</p> <p>nonono = 0</p> <p>block = getBlock(block640)</p> <p>blockStr = decode(block)</p> <p>if blockStr != &rsquo;&rsquo;:</p> <p>lineNum = u&rsquo;%d:n&rsquo; %(i)</p> <p>lineStr = blockStr.decode(&lsquo;utf-16&rsquo;) + &lsquo;nn&rsquo;</p> <p>if isDebug:</p> <p>print lineNum, &lsquo;line number:%s&rsquo; %(hex(i/16))</p> <p>print lineStr,</p> <p>ftxt.write(lineNum.encode(&lsquo;gbk&rsquo;))</p> <p>ftxt.write(lineStr.encode(&lsquo;gbk&rsquo;))</p> <p>i += blockSize</p> <p>print u&rsquo;%s -&gt; %s Convert successful&rsquo; %(fedt.name, ftxt.name)</p> <p>except Exception, e:</p> <p>print u&rsquo;%s -&gt; %s Convert Errorn%s&rsquo; %(fedt.name, ftxt.name, e)</p> <p>finally:</p> <p>fedt.close()</p> <p>ftxt.close()</p> <p>def txtProcess(txtFile):</p> <p>&lsquo;txt-&gt;edt process&rsquo;</p> <p>ftxt = open(dirPath + &lsquo;' + txtFile, &rsquo;r&rsquo;)</p> <p>fedt = open(dirPath + &lsquo;' + txtFile[0:-3] + &rsquo;edt&rsquo;, &lsquo;wb&rsquo;)</p> <p>global i</p> <p>i = 0</p> <p>try:</p> <p>fedt.seek(startPosition)</p> <p>i = 0</p> <p>blockStr = &rsquo;&rsquo;</p> <p>for eachLine in ftxt:</p> <p>if eachLine != &lsquo;n&rsquo; and i % 3 != 0:</p> <p>blockStr += eachLine</p> <p>if (i+2) % 3 == 0:</p> <p>if isDebug:</p> <p>print blockStr.decode(&lsquo;gbk&rsquo;),</p> <p>block = encode(blockStr[:-1].decode(&lsquo;gbk&rsquo;))</p> <p>fedt.write(block)</p> <p>fedt.seek(640 - len(block), os.SEEK_CUR)</p> <p>blockStr = &rsquo;&rsquo;</p> <p>i += 1</p> <p>print u&rsquo;%s -&gt; %s Convert successful&rsquo; %(ftxt.name, fedt.name)</p> <p>except Exception, e:</p> <p>print u&rsquo;%s -&gt; %s Convert Errorn%s&rsquo; %(ftxt.name, fedt.name, e)</p> <p>finally:</p> <p>ftxt.close()</p> <p>fedt.close()</p> <p>if <strong>name</strong> == &lsquo;<strong>main</strong>&rsquo;:</p> <p>welcome()</p> <p>myInit()</p> <p>while True:</p> <p>print &lsquo;n********Menu********&rsquo;</p> <p>print &lsquo;1.edt-&gt;txtn2.txt-&gt;edtn3.view confign4.set confign0.exit&rsquo;</p> <p>mode = raw_input(u&rsquo;Please choose:&rsquo;)</p> <p>if mode == &lsquo;1&rsquo;:</p> <p>fileList = getFiles(&lsquo;.edt&rsquo;)</p> <p>if fileList != None:</p> <p>print u&rsquo;fiels ready to convert:%sn&rsquo; %fileList</p> <p>raw_input(u&rsquo;Press Enter to convert&rsquo;)</p> <p>for edtFile in fileList:</p> <p>edtProcess(edtFile)</p> <p>else:</p> <p>print &lsquo;There is no edt files!&rsquo;</p> <p>raw_input(&lsquo;Press Enter to continue&rsquo;)</p> <p>elif mode == &lsquo;2&rsquo;:</p> <p>fileList = getFiles(&lsquo;.txt&rsquo;)</p> <p>if fileList != None:</p> <p>print u&rsquo;fiels ready to convert:%sn&rsquo; %fileList</p> <p>raw_input(u&rsquo;Press Enter to convert&rsquo;)</p> <p>for txtFile in fileList:</p> <p>txtProcess(txtFile)</p> <p>else:</p> <p>print &lsquo;There is no txt files!&rsquo;</p> <p>raw_input(&lsquo;Press Enter to continue&rsquo;)</p> <p>elif mode == &lsquo;3&rsquo;:</p> <p>print &rsquo;&rsquo;</p> <p>viewConfig()</p> <p>raw_input(&lsquo;Press Enter to continue&rsquo;)</p> <p>elif mode == &lsquo;4&rsquo;:</p> <p>print &rsquo;&rsquo;</p> <p>setConfig()</p> <p>raw_input(&lsquo;Press Enter to continue&rsquo;)</p> <p>elif mode == &lsquo;0&rsquo;:</p> <p>break</p> <p>else:</p> <p>print &lsquo;Error: Input error!!n&rsquo;</p> <p>raw_input(&lsquo;Press Enter to continue&rsquo;)</p> <p>点击这里<a href=https://4ocf5n.dijingchao.com/upload_dropbox/200911/edtTxtConvert_0_9.zip>下载源代码</a>（edtTxtConvert.py+config.cfg+reade me.txt，需要Python2.6以上），如果需要exe版本的程序，可以向我索取，也可以<a href=http://log4d.com/2009/09/python-program-will-be-compiled-into-an-executable-program-exe>使用py2exe自行编译</a>。</p> </div> <!-- /.entry-content --> <hr> <div class=panel> <div class=panel-body> <small>原文链接: <a href=https://blog.alswl.com/2009/11/jagged-alliance-edt-txt-converter-v0-9/ >https://blog.alswl.com/2009/11/jagged-alliance-edt-txt-converter-v0-9/</a></small><br> <small>3a1ff193cee606bd1e2ea554a16353ee</small><br> <small>欢迎关注我的微信公众号：<a href="http://mp.weixin.qq.com/mp/getmasssendmsg?__biz=MzIyNTIwMTU3MQ==#wechat_webview_type=1&wechat_redirect">窥豹</a></small><br> <small><img src=https://4ocf5n.dijingchao.com/upload_dropbox/201605/qrcode_for_gh_17e2f9c2caa4_258.jpg></small> <small><img src=https://4ocf5n.dijingchao.com/upload_dropbox/meta/wechat-pay-s-crop.png></small> </div> </div> <hr> <section class=comments id=comments> <h2>Comments</h2> <div id=disqus_thread></div> <script type=text/javascript>
            /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
            var disqus_shortname = 'log4d'; // required: replace example with your forum shortname

                    var disqus_identifier = 'jagged-alliance-edt-txt-converter-v0-9';
                var disqus_url = 'https://blog.alswl.com/2009/11/jagged-alliance-edt-txt-converter-v0-9/';

            var disqus_config = function () {
                this.language = "en";
            };

        /* * * DON'T EDIT BELOW THIS LINE * * */
        (function() {
            var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
        </script> <noscript>Please enable JavaScript to view the <a href=http://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript> <a href=http://disqus.com class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a> </section> </article> </section> </div> <div class="col-lg-3 col-lg-offset-2" id=sidebar> <aside> <section> <ul class="list-group list-group-flush"> <li class=list-group-item><h4><i class="fa fa-home fa-lg"></i><span class=icon-label>Social</span></h4> <ul class=list-group id=social> <li class=list-group-item><a href=https://blog.alswl.com/atom.xml><i class="fa fa-rss-square fa-lg"></i> RSS</a></li> <li class=list-group-item><a href=https://twitter.com/alswl><i class="fa fa-twitter-square fa-lg"></i> Twitter</a></li> <li class=list-group-item><a href=https://github.com/alswl><i class="fa fa-github-square fa-lg"></i> Github</a></li> <li class=list-group-item><a href=http://weibo.com/alswlx><i class="fa fa-weibo fa-lg"></i> Weibo</a></li> </ul> </li> </ul> </section> </aside> </div> <div class=col-lg-3 id=sidebar> <aside> <section> <ul class="list-group list-group-flush"> <li class=list-group-item><a href=https://blog.alswl.com/ ><h4><i class="fa fa-home fa-lg"></i><span class=icon-label>Categories</span></h4></a> <ul class=list-group id=categories> <li class=list-group-item> <a href=https://blog.alswl.com/category/coding/ > <i class="fa fa-folder-open fa-lg"></i> Coding </a> </li> <li class=list-group-item> <a href=https://blog.alswl.com/category/efficiency/ > <i class="fa fa-folder-open fa-lg"></i> Efficiency </a> </li> <li class=list-group-item> <a href=https://blog.alswl.com/category/fun/ > <i class="fa fa-folder-open fa-lg"></i> Fun </a> </li> <li class=list-group-item> <a href=https://blog.alswl.com/category/internet/ > <i class="fa fa-folder-open fa-lg"></i> Internet </a> </li> <li class=list-group-item> <a href=https://blog.alswl.com/category/life/ > <i class="fa fa-folder-open fa-lg"></i> Life </a> </li> <li class=list-group-item> <a href=https://blog.alswl.com/category/managment/ > <i class="fa fa-folder-open fa-lg"></i> Managment </a> </li> <li class=list-group-item> <a href=https://blog.alswl.com/category/sre/ > <i class="fa fa-folder-open fa-lg"></i> SRE </a> </li> <li class=list-group-item> <a href=https://blog.alswl.com/category/thinking/ > <i class="fa fa-folder-open fa-lg"></i> Thinking </a> </li> <li class=list-group-item> <a href=https://blog.alswl.com/category/ui/ > <i class="fa fa-folder-open fa-lg"></i> UI </a> </li> <li class=list-group-item> <a href=https://blog.alswl.com/category/viewpoint/ > <i class="fa fa-folder-open fa-lg"></i> Viewpoint </a> </li> </ul> </li> </ul> </section> </aside> </div> </div> </div> <footer> <div class=container> <hr> <div class=row> <div class=col-xs-10>&copy; 2005-2021 alswl &middot; Powered by <a href=https://github.com/alswl/pelican-bootstrap3 target=_blank style="font-weight: bold">pelican-bootstrap3</a>, <a href=http://docs.getpelican.com/ target=_blank style="font-weight: bold">Pelican</a>, <a href=http://getbootstrap.com target=_blank style="font-weight: bold">Bootstrap</a>, <p> <small> <a href=http://creativecommons.org/licenses/by-nc-nd/4.0/ rel=license><img alt="Creative Commons License" style=border-width:0 src=https://4ocf5n.dijingchao.com/upload_dropbox/meta/by-nc-nd_4-0_80x15.png></a> Content licensed under a <a href=http://creativecommons.org/licenses/by-nc-nd/4.0/ rel=license>Creative Commons Attribution 4.0 International-NonCommercial-NoDerivatives License</a>, except where indicated otherwise. </small> </p> </div> <div class=col-xs-2><p class=pull-right><i class="fa fa-arrow-up"></i> <a href=#>Back to top</a></p></div> </div> </div> </footer> <script src=https://cdn.staticfile.org/jquery/1.11.0/jquery.min.js></script> <!-- Include all compiled plugins (below), or include individual files as needed --> <script src=https://cdn.staticfile.org/twitter-bootstrap/3.1.0/js/bootstrap.min.js></script> <!-- Enable responsive features in IE8 with Respond.js (https://github.com/scottjehl/Respond) --> <!-- Disqus --> <script type=text/javascript>
        /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
        var disqus_shortname = 'log4d'; // required: replace example with your forum shortname

        /* * * DON'T EDIT BELOW THIS LINE * * */
        (function () {
            var s = document.createElement('script');
            s.async = true;
            s.type = 'text/javascript';
            s.src = '//' + disqus_shortname + '.disqus.com/count.js';
            (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
        }());
    </script> <!-- End Disqus Code --> <!-- Google Analytics --> <script type=text/javascript>

        var _gaq = _gaq || [];
        _gaq.push(['_setAccount', 'UA-8822123-3']);
        _gaq.push(['_trackPageview']);

        (function () {
            var ga = document.createElement('script');
            ga.type = 'text/javascript';
            ga.async = true;
            ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(ga, s);
        })();
    </script> <!-- End Google Analytics Code --> </body> </html>