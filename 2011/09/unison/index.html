<!DOCTYPE html>
<html lang="en" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>使用unison同步文件 | Log4D</title>
<meta name="keywords" content="linuxer, unison">
<meta name="description" content="1. 同步控 我是一个同步控，会妄想自己的文件遭遇不可修复性的毁灭， 因此经常丧心病狂的做备份。 比如每每备份到移动硬盘中， 比如每年一次的刻盘备份，又比如我现在要介绍的同步软件unison。 据我自己考察，这种对备份文件丢失的恐惧来自于小时候一次意外格式化F盘， 从而导致我搜集的所有《龙珠》漫画丢失而产生的。 另一个同步文件的需求来自于我的两台电脑：常驻家中的DELL 6400，是我的大房； 最近得宠的小蜜Think">
<meta name="author" content="alswl">
<link rel="canonical" href="https://blog.alswl.com/2011/09/unison/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.8a8fb2252e3b86ff50510aea076c0754a4ac19e57254bb71b15cc554106148fb.css" integrity="sha256-io&#43;yJS47hv9QUQrqB2wHVKSsGeVyVLtxsVzFVBBhSPs=" rel="preload stylesheet" as="style">
<script defer crossorigin="anonymous" src="/assets/js/highlight.f413e19d0714851f6474e7ee9632408e58ac146fbdbe62747134bea2fa3415e0.js" integrity="sha256-9BPhnQcUhR9kdOfuljJAjlisFG&#43;9vmJ0cTS&#43;ovo0FeA="
    onload="hljs.initHighlightingOnLoad();"></script>
<link rel="icon" href="https://blog.alswl.com/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="https://blog.alswl.com/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://blog.alswl.com/favicon-32x32.png">
<link rel="apple-touch-icon" href="https://blog.alswl.com/apple-touch-icon.png">
<link rel="mask-icon" href="https://blog.alswl.com/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --hljs-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-7S40P40QGJ"></script>
<script>
var doNotTrack = false;
if (!doNotTrack) {
	window.dataLayer = window.dataLayer || [];
	function gtag(){dataLayer.push(arguments);}
	gtag('js', new Date());
	gtag('config', 'G-7S40P40QGJ', { 'anonymize_ip': false });
}
</script>
<meta property="og:title" content="使用unison同步文件" />
<meta property="og:description" content="1. 同步控 我是一个同步控，会妄想自己的文件遭遇不可修复性的毁灭， 因此经常丧心病狂的做备份。 比如每每备份到移动硬盘中， 比如每年一次的刻盘备份，又比如我现在要介绍的同步软件unison。 据我自己考察，这种对备份文件丢失的恐惧来自于小时候一次意外格式化F盘， 从而导致我搜集的所有《龙珠》漫画丢失而产生的。 另一个同步文件的需求来自于我的两台电脑：常驻家中的DELL 6400，是我的大房； 最近得宠的小蜜Think" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://blog.alswl.com/2011/09/unison/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2011-09-27T00:00:00+08:00" />
<meta property="article:modified_time" content="2011-09-27T00:00:00+08:00" /><meta property="og:site_name" content="Log4D" />

<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="使用unison同步文件"/>
<meta name="twitter:description" content="1. 同步控 我是一个同步控，会妄想自己的文件遭遇不可修复性的毁灭， 因此经常丧心病狂的做备份。 比如每每备份到移动硬盘中， 比如每年一次的刻盘备份，又比如我现在要介绍的同步软件unison。 据我自己考察，这种对备份文件丢失的恐惧来自于小时候一次意外格式化F盘， 从而导致我搜集的所有《龙珠》漫画丢失而产生的。 另一个同步文件的需求来自于我的两台电脑：常驻家中的DELL 6400，是我的大房； 最近得宠的小蜜Think"/>


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "Posts",
      "item": "https://blog.alswl.com/posts/"
    }, 
    {
      "@type": "ListItem",
      "position":  3 ,
      "name": "使用unison同步文件",
      "item": "https://blog.alswl.com/2011/09/unison/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "使用unison同步文件",
  "name": "使用unison同步文件",
  "description": "1. 同步控 我是一个同步控，会妄想自己的文件遭遇不可修复性的毁灭， 因此经常丧心病狂的做备份。 比如每每备份到移动硬盘中， 比如每年一次的刻盘备份，又比如我现在要介绍的同步软件unison。 据我自己考察，这种对备份文件丢失的恐惧来自于小时候一次意外格式化F盘， 从而导致我搜集的所有《龙珠》漫画丢失而产生的。 另一个同步文件的需求来自于我的两台电脑：常驻家中的DELL 6400，是我的大房； 最近得宠的小蜜Think",
  "keywords": [
    "linuxer", "unison"
  ],
  "articleBody": "1. 同步控 我是一个同步控，会妄想自己的文件遭遇不可修复性的毁灭， 因此经常丧心病狂的做备份。 比如每每备份到移动硬盘中， 比如每年一次的刻盘备份，又比如我现在要介绍的同步软件unison。\n据我自己考察，这种对备份文件丢失的恐惧来自于小时候一次意外格式化F盘， 从而导致我搜集的所有《龙珠》漫画丢失而产生的。\n另一个同步文件的需求来自于我的两台电脑：常驻家中的DELL 6400，是我的大房； 最近得宠的小蜜Thinkpad X201。其中6400是Win7系统， 而X200是Arch Linux主打的双系统，我希望两者的文件保持同步， 便于我两边使用时候都能检索资料。如何实现跨平台同步方案让我头疼了好久， 幸好有unison拯救了我。\n2. 同步历史 很久很久以前，那时候我还喝三鹿，我开始用TotalCmd来做同步文件， 依稀记得那个功能是在 命令 里面的 比较文件夹 。 这个功能满足我当时简单粗糙的需求。只要把需要同步的文件夹分列TotalCmd两侧， 然后就可以通过命令自动查找相异的文件。\n当时在我看来，尤其神奇的是文件过滤功能和按照 日期 、 文件内容 比较功能。 着实帮了我很大忙。\n再过了几年，TotalCmd不能满足我了，我不想每次都选择需要同步的文件， 再用肉眼比对，同步功能也偏少。我搜寻到一款老牌的同步工具， 叫做GoodSync，这是一款商业软件，可以试用30天， 作为专业的同步软件，这个GoodSync的确是蛮适用：支持大小写屏蔽、 文件过滤等等。\nGoodSync还可以支持网络映射硬盘，再通过Samba等协议支持，可以实现跨平台同步。 可惜GoodSync要收费，而且通过网络映射的方式也不慎完美，所以最后也弃用了。\n3. unison 终于轮到unison闪亮登场了。 unison解决了跨平台同步，文件过滤，断点续接，大小写同步等等各种问题。\n官方介绍：\nUnison is a file-synchronization tool for Unix and Windows. It allows two replicas of a collection of files and directories to be stored on different hosts (or different disks on the same host), modified separately, and then brought up to date by propagating the changes in each replica to the other.\nUnison是一枚Unix和Windows通吃的文件同步工具。它允许不同电脑上（或者同一电脑上不同地方）的文件和目录之间惊心修改和同步更新。\nunison使用时候有服务器、客户机之分，客户机通过ssh连接到服务器端， 所以相对而言，数据通道还是安全的。\n4. 安装 sudo pacman -S unison 感谢众神赐予我们各种软件包，以上是Arch Linux的安装命令。 Ubuntu之类的也差不多apt-get了。\n5. 配置 unison的传输通道用ssh，所以必须在同步的电脑上面配置好ssh， 服务端需要配置好sshd，另外最好配置好ssh公钥密钥，可以参考 使用DDNS+SSH连通家庭/工作电脑。\nunison使用 ~/.unison/*.prf 的配置文件，默认应该会有一个 default.prf ， 我的 default.prf 配置如下。\n# Unison preferences file #root = /cygdrive/f #root = ssh://mm061.log4d.com//home/alswl log = true\nlogfile = /home/alswl/.unison/.unison.log\n#batch = true\n#auto = true\n#ignorecase = true\nignore = Name {Thumbs.db}\nignore = Path {music/iTunes}\n其中 root 表示同步的两个目录，ssh开头的服务器端路径。 log 设定log文件位置， batch 指自动同步而不经过确认， auto 是同步之后列出同步建议清单， 选择 yes or no 即可。 ignorecase 是忽略大小写，在跨平台同步时候蛮有用。 ignore 指忽略文件列表，分为 Name 和 Path 。\n我的default配置并不是一个可用配置，只是一个基础配置文件，用来给其他配置文件使用\n# Unison preferences file include default root = /home/alswl\nroot = ssh://mm061.log4d.com//home/alswl\npath = music\n我使用 include 选项来加入 default 配置，就可以使用通用配置了。\n6. 运行 终于到了激动人心的时刻了，我们使用下面命令同步文件夹。\nunison music 其中 music 就是之前配置好的 music.prf 。Papapa之后，就是各种选项了。\nunison默认情况下面会依次提醒每个差异文件的差别，可以使用键盘命令查看具体差异。 依次查看文件会很烦，所以我习惯性使用 auto 命令来自动合并。 auto 会根据文件的状态，最后更新日期来选择合适的同步操作。\n完了，没了，谢谢。\n哦，对了，当时写那篇 使用DDNS+SSH连通家庭工作电脑 大部分原因就是因为这个同步需求。而且经过我3个月来的使用，unison真是个好工具。\n",
  "wordCount" : "1569",
  "inLanguage": "en",
  "datePublished": "2011-09-27T00:00:00+08:00",
  "dateModified": "2011-09-27T00:00:00+08:00",
  "author":{
    "@type": "Person",
    "name": "alswl"
  },
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://blog.alswl.com/2011/09/unison/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "Log4D",
    "logo": {
      "@type": "ImageObject",
      "url": "https://blog.alswl.com/favicon.ico"
    }
  }
}
</script>
</head>

<body class="" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="https://blog.alswl.com" accesskey="h" title="Log4D (Alt + H)">Log4D</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="http://en.blog.alswl.com/" title="English Blog">
                    <span>English Blog</span>&nbsp;
                    <svg fill="none" shape-rendering="geometricPrecision" stroke="currentColor" stroke-linecap="round"
                        stroke-linejoin="round" stroke-width="2.5" viewBox="0 0 24 24" height="12" width="12">
                        <path d="M18 13v6a2 2 0 01-2 2H5a2 2 0 01-2-2V8a2 2 0 012-2h6"></path>
                        <path d="M15 3h6v6"></path>
                        <path d="M10 14L21 3"></path>
                    </svg>
                </a>
            </li>
            <li>
                <a href="https://blog.alswl.com/categories/" title="分类">
                    <span>分类</span>
                </a>
            </li>
            <li>
                <a href="https://blog.alswl.com/tags/" title="标签">
                    <span>标签</span>
                </a>
            </li>
            <li>
                <a href="https://blog.alswl.com/archives/" title="存档">
                    <span>存档</span>
                </a>
            </li>
            <li>
                <a href="https://blog.alswl.com/about/" title="关于我">
                    <span>关于我</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    <div class="breadcrumbs"><a href="https://blog.alswl.com">Home</a>&nbsp;»&nbsp;<a href="https://blog.alswl.com/posts/">Posts</a></div>
    <h1 class="post-title">
      使用unison同步文件
    </h1>
    <div class="post-meta"><span title='2011-09-27 00:00:00 +0800 +0800'>2011-09-27</span>&nbsp;·&nbsp;alswl

</div>
  </header> <div class="toc">
    <details >
        <summary accesskey="c" title="(Alt + C)">
            <span class="details">Table of Contents</span>
        </summary>

        <div class="inner"><nav id="TableOfContents">
  <ul>
    <li><a href="#1-同步控">1. 同步控</a></li>
    <li><a href="#2-同步历史">2. 同步历史</a></li>
    <li><a href="#3-unison">3. unison</a></li>
    <li><a href="#4-安装">4. 安装</a></li>
    <li><a href="#5-配置">5. 配置</a></li>
    <li><a href="#6-运行">6. 运行</a></li>
  </ul>
</nav>
        </div>
    </details>
</div>

  <div class="post-content"><h2 id="1-同步控">1. 同步控<a hidden class="anchor" aria-hidden="true" href="#1-同步控">#</a></h2>
<p>我是一个同步控，会妄想自己的文件遭遇不可修复性的毁灭， 因此经常丧心病狂的做备份。 比如每每备份到移动硬盘中，
比如每年一次的刻盘备份，又比如我现在要介绍的同步软件unison。</p>
<p>据我自己考察，这种对备份文件丢失的恐惧来自于小时候一次意外格式化F盘， 从而导致我搜集的所有《龙珠》漫画丢失而产生的。</p>
<p>另一个同步文件的需求来自于我的两台电脑：常驻家中的DELL 6400，是我的大房； 最近得宠的小蜜Thinkpad X201。其中6400是Win7系统，
而X200是Arch Linux主打的双系统，我希望两者的文件保持同步， 便于我两边使用时候都能检索资料。如何实现跨平台同步方案让我头疼了好久，
幸好有unison拯救了我。</p>
<h2 id="2-同步历史">2. 同步历史<a hidden class="anchor" aria-hidden="true" href="#2-同步历史">#</a></h2>
<p>很久很久以前，那时候我还喝三鹿，我开始用TotalCmd来做同步文件， 依稀记得那个功能是在 <code>命令</code> 里面的 <code>比较文件夹</code> 。
这个功能满足我当时简单粗糙的需求。只要把需要同步的文件夹分列TotalCmd两侧， 然后就可以通过命令自动查找相异的文件。</p>
<p>当时在我看来，尤其神奇的是文件过滤功能和按照 <code>日期</code> 、 <code>文件内容</code> 比较功能。 着实帮了我很大忙。</p>
<p>再过了几年，TotalCmd不能满足我了，我不想每次都选择需要同步的文件， 再用肉眼比对，同步功能也偏少。我搜寻到一款老牌的同步工具，
叫做<a href="http://www.goodsync.com/">GoodSync</a>，这是一款商业软件，可以试用30天，
作为专业的同步软件，这个GoodSync的确是蛮适用：支持大小写屏蔽、 文件过滤等等。</p>
<p>GoodSync还可以支持网络映射硬盘，再通过Samba等协议支持，可以实现跨平台同步。
可惜GoodSync要收费，而且通过网络映射的方式也不慎完美，所以最后也弃用了。</p>
<h2 id="3-unison">3. unison<a hidden class="anchor" aria-hidden="true" href="#3-unison">#</a></h2>
<p>终于轮到<a href="http://www.cis.upenn.edu/~bcpierce/unison/">unison</a>闪亮登场了。
unison解决了跨平台同步，文件过滤，断点续接，大小写同步等等各种问题。</p>
<p>官方介绍：</p>
<blockquote>
<p>Unison is a file-synchronization tool for Unix and Windows. It allows two
replicas of a collection of files and directories to be stored on different
hosts (or different disks on the same host), modified separately, and then
brought up to date by propagating the changes in each replica to the other.</p>
</blockquote>
<blockquote>
</blockquote>
<blockquote>
</blockquote>
<blockquote>
<p>Unison是一枚Unix和Windows通吃的文件同步工具。它允许不同电脑上（或者同一电脑上不同地方）的文件和目录之间惊心修改和同步更新。</p>
</blockquote>
<blockquote>
</blockquote>
<blockquote>
</blockquote>
<p>unison使用时候有服务器、客户机之分，客户机通过ssh连接到服务器端， 所以相对而言，数据通道还是安全的。</p>
<h2 id="4-安装">4. 安装<a hidden class="anchor" aria-hidden="true" href="#4-安装">#</a></h2>
<pre><code>sudo pacman -S unison
</code></pre>
<p>感谢众神赐予我们各种软件包，以上是Arch Linux的安装命令。 Ubuntu之类的也差不多apt-get了。</p>
<h2 id="5-配置">5. 配置<a hidden class="anchor" aria-hidden="true" href="#5-配置">#</a></h2>
<p>unison的传输通道用ssh，所以必须在同步的电脑上面配置好ssh， 服务端需要配置好sshd，另外最好配置好ssh公钥密钥，可以参考
<a href="http://log4d.com/2011/06/ddns-ssh">使用DDNS+SSH连通家庭/工作电脑</a>。</p>
<p>unison使用 <code>~/.unison/*.prf</code> 的配置文件，默认应该会有一个 <code>default.prf</code> ， 我的 <code>default.prf</code>
配置如下。</p>
<pre><code># Unison preferences file
#root = /cygdrive/f
#root = ssh://mm061.log4d.com//home/alswl
</code></pre>
<p>log = true</p>
<p>logfile = /home/alswl/.unison/.unison.log</p>
<p>#batch = true</p>
<p>#auto = true</p>
<p>#ignorecase = true</p>
<p>ignore = Name {Thumbs.db}</p>
<p>ignore = Path {music/iTunes}</p>
<p>其中 <code>root</code> 表示同步的两个目录，ssh开头的服务器端路径。 <code>log</code> 设定log文件位置， <code>batch</code> 指自动同步而不经过确认， <code>auto</code>
是同步之后列出同步建议清单， 选择 <code>yes</code> or <code>no</code> 即可。 <code>ignorecase</code> 是忽略大小写，在跨平台同步时候蛮有用。 <code>ignore</code>
指忽略文件列表，分为 <code>Name</code> 和 <code>Path</code> 。</p>
<p>我的default配置并不是一个可用配置，只是一个基础配置文件，用来给其他配置文件使用</p>
<pre><code># Unison preferences file
include default
</code></pre>
<p>root = /home/alswl</p>
<p>root = ssh://mm061.log4d.com//home/alswl</p>
<p>path = music</p>
<p>我使用 <code>include</code> 选项来加入 <code>default</code> 配置，就可以使用通用配置了。</p>
<h2 id="6-运行">6. 运行<a hidden class="anchor" aria-hidden="true" href="#6-运行">#</a></h2>
<p>终于到了激动人心的时刻了，我们使用下面命令同步文件夹。</p>
<pre><code>unison music
</code></pre>
<p>其中 <code>music</code> 就是之前配置好的 <code>music.prf</code> 。Papapa之后，就是各种选项了。</p>
<p>unison默认情况下面会依次提醒每个差异文件的差别，可以使用键盘命令查看具体差异。 依次查看文件会很烦，所以我习惯性使用 <code>auto</code> 命令来自动合并。
<code>auto</code> 会根据文件的状态，最后更新日期来选择合适的同步操作。</p>
<p>完了，没了，谢谢。</p>
<p>哦，对了，当时写那篇 <a href="http://log4d.com/2011/06/ddns-ssh">使用DDNS+SSH连通家庭工作电脑</a>
大部分原因就是因为这个同步需求。而且经过我3个月来的使用，unison真是个好工具。</p>

<hr />
<p>原文链接: <a href="https://blog.alswl.com/2011/09/unison/">使用unison同步文件 | Log4D</a></p>
<p>3a1ff193cee606bd1e2ea554a16353ee</p>
<p>欢迎关注我的微信公众号：<a
href="http://mp.weixin.qq.com/mp/getmasssendmsg?__biz=MzIyNTIwMTU3MQ==#wechat_webview_type=1&amp;wechat_redirect">窥豹</a></p>
<figure>
<img
src="https://d05fae.dijingchao.com/upload_dropbox/201605/qrcode_for_gh_17e2f9c2caa4_258.jpg"
alt="窥豹" />
<figcaption aria-hidden="true">窥豹</figcaption>
</figure>

    
  </div>

  <footer class="post-footer">
    <ul class="post-tags">
      <li><a href="https://blog.alswl.com/tags/linuxer/">linuxer</a></li>
      <li><a href="https://blog.alswl.com/tags/unison/">unison</a></li>
    </ul>
<nav class="paginav">
  <a class="prev" href="https://blog.alswl.com/2011/09/new-logo/">
    <span class="title">« Prev</span>
    <br>
    <span>新logo</span>
  </a>
  <a class="next" href="https://blog.alswl.com/2011/09/interlace-progressive-image/">
    <span class="title">Next »</span>
    <br>
    <span>网页渐进式载入图片</span>
  </a>
</nav>

  </footer><div id="waline"></div>
<script type="module">
  import { init } from 'https://unpkg.com/@waline/client@v2/dist/waline.mjs';

    
    
    init({
      el: '#waline',
      serverURL: 'https://comments-waline.blog.alswl.com',
      emoji: false,
      search: false,
      reaction: true, 
      requiredMeta: ['nick', 'mail'],
      login: 'disable',
      imageUploader: false,
      texRenderer: false,
    });
</script>

</article>
    </main>
    
<footer class="footer">
    <span>&copy; 2023 <a href="https://blog.alswl.com">Log4D</a></span>
    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
<script>
    document.querySelectorAll('pre > code').forEach((codeblock) => {
        const container = codeblock.parentNode.parentNode;

        const copybutton = document.createElement('button');
        copybutton.classList.add('copy-code');
        copybutton.innerHTML = 'copy';

        function copyingDone() {
            copybutton.innerHTML = 'copied!';
            setTimeout(() => {
                copybutton.innerHTML = 'copy';
            }, 2000);
        }

        copybutton.addEventListener('click', (cb) => {
            if ('clipboard' in navigator) {
                navigator.clipboard.writeText(codeblock.textContent);
                copyingDone();
                return;
            }

            const range = document.createRange();
            range.selectNodeContents(codeblock);
            const selection = window.getSelection();
            selection.removeAllRanges();
            selection.addRange(range);
            try {
                document.execCommand('copy');
                copyingDone();
            } catch (e) { };
            selection.removeRange(range);
        });

        if (container.classList.contains("highlight")) {
            container.appendChild(copybutton);
        } else if (container.parentNode.firstChild == container) {
            
        } else if (codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName == "TABLE") {
            
            codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(copybutton);
        } else {
            
            codeblock.parentNode.appendChild(copybutton);
        }
    });
</script>
</body>

</html>
